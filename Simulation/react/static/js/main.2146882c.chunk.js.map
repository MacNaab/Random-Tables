{"version":3,"sources":["sim/prétiré.js","module/combatant.js","module/party.js","module/combat.js","module/attack.js","module/capacité.js","module/buff.js","module/malus.js","sim/formalert.js","sim/form.js","sim/formcheck.js","sim/log.js","sim/partipopedit.js","sim/partipop.js","sim/sim.js","sim/participant.js","sim/urlexpt.js","sim/urlimport.js","sim/render.js","App.js","reportWebVitals.js","index.js","module/dice_roller.js"],"names":["module","exports","found","sortie","REF","DEX","ESQ","ATH","MEL","BAG","Caract","RÉF","Compt","Athlétisme","Mêlée","Bagarre","valeur","push","Number","Math","max","Arme","forEach","e","atq","effect","poison","poisonID","feu","feuID","sang","sangID","pré","préID","eff","searching","Effet","find","f","Nom","error","Base","DMG","regen","fureur","embush","regenID","Régénération","Capacités","dice","require","sumBuffs","self","stat","total","buffs","buff","bonus","data","this","id","hp","ps","max_hp","ac","pa","max_ac","initiative","atk","def","rof","capacité","monstre","strat","position","reacted","reactions","stun","etou","etat","mod","malus","addBuff","addReaction","reaction","checkBuffs","filter","time","tickBuffs","stats","parent","index","sum","SumAtk","rollInitiative","expl","attackChoice","posibilité","length","roll","floor","random","attackRoll","viser","effet","isNaN","dé","defRoll","isHit","nextReaction","trigger","takeDamage","damageRoll","isDead","isStun","ETOU","resetMalus","reset","init","members","combatStrategies","lowest_hp","combatantA","combatantB","highest_hp","lowest_pa","lowest_position","highest_position","highest_dmg","dmgA","attacks","element","dmg","dice_type","dice_number","dmg_bonus","dmgB","addMember","combatant","selectTarget","opponents","sort","Attack","Capacité","Malus","parties","addParty","party","turnList","initiateCombat","logger","string","party_id","a","b","n","member","runRound","current_combatant","opponentParties","p_id","atkch","i","target","atkRoll","damage","loc","JSON","stringify","brut","desc","armor","crit","runFight","anticrash","isFightOnGoing","survivorsStats","survivors","alive","c","Object","keys","dead","cible","monster","jet","loca","FP","cc","diff","el","Buff","Regen","console","log","name","useStyles","makeStyles","theme","root","width","marginTop","spacing","SimpleAlerts","props","classes","className","Alert","severity","Prétired","TryCheck","state","err","base","Fab","color","aria-label","title","onClick","groupe","CheckMb","prétiré","anchorEl","anchorEl2","anchorEl3","style","display","margin","Example","handleClick","event","setState","currentTarget","handleClose","handleInputChange","value","list","includes","checked","handleChange","handleAsynChange","values","handleAsynChange2","handleRemoveClick","splice","handleAddClick","FR","checkPrétiré","Bestiaire","child","Monstre","PS","Armure","ÉTOU","checkCheck","input","checkChecked","child_atk","handleErr","bind","noValidate","autoComplete","grid","Grid","container","item","xs","Autocomplete","options","group","freeSolo","onInputChange","renderInput","params","TextField","label","variant","type","onChange","mt","Button","aria-controls","aria-haspopup","Menu","keepMounted","open","Boolean","onClose","MenuItem","getOptionLabel","option","center","map","x","placeholder","FormControlLabel","control","Checkbox","FormControl","formControl","InputLabel","Select","labelId","fr","IconButton","min","Component","withStyles","textAlign","flexGrow","centerBlock","withTheme","Test","ee","dataSur","groupePJ","clé","ordre","detail","surv","dc","k","array1","indexA","findIndex","indexB","indexC","indexD","slice","TreeItem","nodeId","bouclier","test2","height","gridTemplateColumns","block","FileSystemNavigator","logs","TreeView","defaultCollapseIcon","defaultExpandIcon","survivor","List","component","ratio","ListItem","button","ListItemText","primary","FormDialog","React","useState","setOpen","del","edit","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","autoFocus","fullWidth","DialogActions","paper","border","padding","backgroundColor","palette","background","typography","Atq","d","Capa","SimplePopper","setAnchorEl","undefined","Chip","aria-describedby","Popper","Paper","Typography","Combatant","Party","Combat","PartiList","aff","iColor","columnCount","RecipeReviewCard","Card","CardHeader","CardContent","CardActions","disableSpacing","URLSearchParams","append","adresseActuelle","window","location","origin","pathname","navigator","clipboard","writeText","encodeURI","URLexportation","GetApp","sim","p","new_combatant","loggerdeloggi","loggeridex","logginette","winners","winner_party","winRatio","Sim","RotateLeft","URLi","adresse","search","decodeURI","searchParams","get","parse","UserForm","val","addLog","editMb","delMb","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","Rand","reducer","accumulator","currentValue","expression","formule","split","Echec","critique","reduce"],"mappings":"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","file":"static/js/main.2146882c.chunk.js","sourcesContent":["module.exports = function(found){\r\n    let sortie = {};\r\n    sortie.def = function() {\r\n        // Esquive (REF) ||  Athlétisme (DEX)  ||  Mêlée (REF)   ||  Bagarre (REF)\r\n        let REF,DEX,ESQ,ATH,MEL,BAG;\r\n        found.Caract.RÉF ? REF = found.Caract.RÉF : REF = 0;\r\n        found.Caract.DEX ? DEX = found.Caract.DEX : DEX = 0;\r\n        found.Compt['Esquive/Évasion'] ? ESQ = found.Compt['Esquive/Évasion'] : ESQ = 0;\r\n        found.Compt.Athlétisme ? ATH = found.Compt.Athlétisme : ATH = 0;\r\n        found.Compt.Mêlée ? MEL = found.Compt.Mêlée : MEL = 0;\r\n        found.Compt.Bagarre ? BAG = found.Compt.Bagarre : BAG = 0;\r\n\r\n        let valeur = [];\r\n        valeur.push(Number(REF)+Number(ESQ));\r\n        valeur.push(Number(REF)+Number(MEL));\r\n        valeur.push(Number(REF)+Number(BAG));\r\n        valeur.push(Number(DEX)+Number(ATH));\r\n\r\n        return Math.max(...valeur);\r\n    }\r\n    sortie.atq = function() {\r\n        let valeur = [];\r\n        found.Arme.forEach(function(e){\r\n            let effect = {\r\n                poison: false,\r\n                poisonID: '',\r\n                feu: false,\r\n                feuID: '',\r\n                sang: false,\r\n                sangID: '',\r\n                pré: false,\r\n                préID: 0,\r\n            }\r\n            let effectList = ['poison','feu','sang','pré'];\r\n            effectList.forEach(function(eff){\r\n                try {\r\n                    let searching = e.Effet.find(f => f.Nom === eff)\r\n                    if(searching){\r\n                        effect[eff] = true;\r\n                        effect[eff+'ID'] = searching.valeur;\r\n                    }\r\n                } catch (error) {}\r\n            });\r\n            \r\n            let atq;\r\n            e.Base ? atq = e.Base : atq = 10;\r\n            valeur.push({\r\n                'atk':  atq,\r\n                'dice': e.DMG,\r\n                'rof': e['Att/tour'],\r\n                'FR': false,\r\n                'FP': false,\r\n                'viser':'Aléatoire',\r\n                'effet': effect\r\n            });         \r\n        });\r\n        return valeur;\r\n    }\r\n    sortie.capa = function(){\r\n        let valeur = {regen: false, fureur: false, embush: false, regenID: ''};\r\n        if(found.Régénération){\r\n            valeur.regen = true;\r\n            valeur.regenID = found.Régénération;\r\n        }\r\n        let searching = found.Capacités.find(f => f === 'Fureur');\r\n        if(searching){valeur.fureur=true;}\r\n        return valeur;\r\n    }\r\n    return sortie;\r\n};","const dice = require('./dice_roller');\r\n//const Attack = require('./attack');\r\n\r\n/**\r\n * Constructs a combatant object.\r\n *\r\n * @constructor\r\n * \r\n * let data = {\r\n *  @param id:'Dwarf',\r\n *  // Unique\r\n *  @param ps:15,\r\n *  // PS: Points de Santé\r\n *  @param pa:15,\r\n *  // PA: Pouvoir d'Arrêt\r\n *  @param initiative:15,\r\n *  // Initiative\r\n *  @param def:15,\r\n *  // Base DEF\r\n *  @param capacité:[{name:'id',effet:'valeur'}],\r\n *  // Liste des capacité\r\n *  @param atk: []\r\n *  // Type ATQ\r\n *    @param atk:15,\r\n *    // Base ATQ\r\n *    @param dice:'3d6+1',\r\n *    // DMG\r\n *    @param rof:1,\r\n *    // Att par tour\r\n *    @param FR: false || true\r\n *    // Frappe Rapide\r\n *    @param FP: false || true\r\n *    // Frappe Puissante\r\n *    @param viser: Aléatoire\r\n *    // Localisation\r\n *  ]\r\n *    @param monstre: true || false \r\n *    @param strat: Aléatoire\r\n *    //  Stratégie de combat\r\n *    @param position:  1\r\n *    // Place sur le champs de bataille\r\n *    @param etou: 10\r\n *    // valeur étourdissement\r\n *    @param stun: {etou: data.etou, etat: false, mod: null}\r\n *    // etou = valeur  etat = true|fals  mod = valeur\r\n * };\r\n *\r\n */\r\nmodule.exports = function(data){\r\n  this.id = data.id;\r\n  this.hp = data.ps;\r\n  this.max_hp = data.ps;\r\n  this.ac = data.pa;\r\n  this.max_ac = data.pa;\r\n  this.initiative = data.initiative;\r\n  this.atk = data.atk; // [{atk:1,dice:'1d1',rof:1,FR:false,FP:false,viser:false}]\r\n  this.def = data.def;\r\n//  this.attacks = [new Attack(dmg, dmg_dice, dmg_bonus)];\r\n  this.rof = 1;\r\n  this.buffs = [];\r\n  this.capacité = data.capacité;\r\n  this.monstre = data.monstre;\r\n  this.strat = data.strat;\r\n  this.position = data.position;\r\n  this.reacted = false;\r\n  this.reactions = [];\r\n  this.stun = {etou: data.etou, etat: false, mod: null};\r\n  this.malus = {sang: false, poison: false, feu: false};\r\n/*  this.addAttack = function(attack){\r\n    this.attacks.push(attack);\r\n  };*/\r\n  this.addBuff = function(buff){\r\n    this.buffs.push(buff);\r\n  };\r\n  this.addReaction = function(reaction){\r\n    this.reactions.push(reaction);\r\n  };\r\n  this.checkBuffs = function(){\r\n    this.buffs = this.buffs.filter(function(buff){\r\n      return !!buff.time;\r\n    });\r\n  };\r\n  this.tickBuffs = function(){\r\n    this.buffs.forEach(function(buff){\r\n      if (buff.time > 0){\r\n         buff.time -= 1;\r\n       }\r\n    });\r\n  };\r\n  this.stats = {\r\n    hp: function(){return this.parent.hp;},\r\n    ac: function(){return sumBuffs(this.parent, 'ac');},\r\n    initiative: function(){return sumBuffs(this.parent, 'initiative');},\r\n    atk: function(){return SumAtk(this.parent);},\r\n    def: function(){return sumBuffs(this.parent, 'def');}\r\n  };\r\n  this.rollInitiative = function(){\r\n    return dice(\"1d10+\"+this.stats.initiative()).expl();\r\n  };\r\n  this.attackChoice = function(){\r\n    let posibilité = this.atk.length;\r\n    let roll = Math.floor(Math.random() * posibilité);\r\n    let sortie = this.atk[roll];\r\n    sortie.id = roll;\r\n    return sortie;\r\n  };\r\n  this.attackRoll = function(e){\r\n    let mod = Number(e.atk);\r\n    if(e.viser === \"Tête\"){mod-=6;}\r\n\t\tif(e.viser === \"Torse\"){mod-=1;}\r\n\t\tif(e.viser === \"Membre\"){mod-=3;}\r\n    e.effet.pré ? mod+= Number(e.effet.préID) : mod+=0;\r\n    isNaN(this.stats.atk()) ?  mod += 0 : mod += Number(this.stats.atk());\r\n    let dé = \"1d10\";\r\n    if(mod!==0){\r\n      if(mod>0){dé=\"1d10+\"+mod}else{dé=\"1d10\"+mod};\r\n    }\r\n    return dice(dé).expl();\r\n  };\r\n  this.defRoll = function(){\r\n    let mod = Number(this.stats.def());\r\n    let dé = \"1d10\";\r\n    if(mod!==0){\r\n      if(mod>0){dé=\"1d10+\"+mod}else{dé=\"1d10\"+mod};\r\n    }\r\n    return dice(dé).expl();\r\n  };\r\n  this.isHit = function(attackRoll,defRoll){\r\n    let nextReaction = this.reactions.length - 1;\r\n    while(!this.reacted && nextReaction >= 0 && nextReaction < this.reactions.length){\r\n      this.reacted = this.reactions[nextReaction].trigger(this, attackRoll);\r\n      nextReaction++;\r\n    }\r\n    if(attackRoll > defRoll){\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n  this.takeDamage = function(damageRoll){\r\n    this.hp -= damageRoll;\r\n    if (this.hp < 0){\r\n      this.hp = 0;\r\n    }\r\n  };\r\n  this.isDead = function(){\r\n    if (this.hp <= 0) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n  this.isStun = function(mod){\r\n    let roll = dice('1d10');\r\n    let ETOU = Number(this.stun.etou)+Number(mod);\r\n    if(roll.total < ETOU){\r\n      this.stun.etat = false;this.stun.mod = null;\r\n    }else{\r\n      this.stun.etat = true; this.stun.mod = mod;\r\n    }\r\n  }\r\n  this.resetMalus = function(){\r\n    this.malus = {sang: false, poison: false, feu: false};\r\n  }\r\n  this.reset = function(){\r\n    this.hp = this.max_hp;\r\n    this.ac = this.max_ac;\r\n    this.reacted = false;\r\n    this.malus = {sang: false, poison: false, feu: false}\r\n  };\r\n  this.init = function(){\r\n    this.stats.parent = this;\r\n    delete this.init;\r\n  };\r\n  this.init();\r\n};\r\n\r\nfunction SumAtk(self, index){\r\n  let sum = [];\r\n  self.atk.forEach(function(e){\r\n    let total = e.atk;\r\n    self.buffs.forEach(function(buff){\r\n      if (buff.bonus.atk){\r\n        total += buff.bonus.atk;\r\n      }\r\n    });\r\n    sum.push(total);\r\n  });\r\n  return sum;\r\n}\r\n\r\nfunction sumBuffs(self, stat){\r\n  let total = self[stat];\r\n  self.buffs.forEach(function(buff){\r\n    if (buff.bonus[stat]){\r\n      total += buff.bonus[stat];\r\n    }\r\n  });\r\n  return total;\r\n}","module.exports = function(){\r\n    this.members = [];\r\n    this.combatStrategies = {\r\n      lowest_hp: function(combatantA, combatantB){\r\n        return combatantA.hp - combatantB.hp;\r\n      },\r\n      highest_hp: function(combatantA, combatantB){\r\n        return combatantB.hp - combatantA.hp;\r\n      },\r\n      lowest_pa: function(combatantA, combatantB){\r\n        return combatantA.ac - combatantB.ac;\r\n      },\r\n      lowest_position: function(combatantA, combatantB){\r\n        return combatantA.position - combatantB.position;\r\n      },\r\n      highest_position: function(combatantA, combatantB){\r\n        return combatantB.position - combatantA.position;\r\n      },\r\n      highest_dmg: function(combatantA, combatantB){\r\n        let dmgA = 0;\r\n        combatantA.attacks.forEach(function(element) {\r\n          let dmg = element.dice_type * element.dice_number + element.dmg_bonus;\r\n          dmgA += dmg;\r\n        });\r\n  \r\n        let dmgB = 0;\r\n        combatantB.attacks.forEach(function(element) {\r\n          let dmg = element.dice_type * element.dice_number + element.dmg_bonus;\r\n          dmgB += dmg;\r\n        });\r\n  \r\n        return dmgB - dmgA;\r\n      }\r\n    };\r\n//    this.combatStrategy = this.combatStrategies.lowest_hp;\r\n    this.addMember = function(combatant){\r\n      this.members.push(combatant);\r\n    };\r\n    this.selectTarget = function(opponents,strat){\r\n      opponents.sort(this.combatStrategies[strat]);\r\n      let target = opponents[0];\r\n      return target;\r\n    };\r\n  };","const Attack = require('./attack');\r\nconst Capacité = require('./capacité');\r\nconst Malus = require('./malus');\r\n\r\nmodule.exports = function(){\r\n\r\n    this.parties = {};\r\n    this.addParty = function(party, id){\r\n      this.parties[id] = party;\r\n    };\r\n    this.turnList = [];\r\n    this.initiateCombat = function(logger){\r\n      if (typeof logger == 'undefined'){\r\n        logger = function(string){};\r\n      }\r\n      let self = this;\r\n      for(let party in self.parties){\r\n        self.parties[party].members.forEach(function(combatant){\r\n          self.turnList.push({\r\n            party_id: party,\r\n            combatant: combatant,\r\n            roll: combatant.rollInitiative()\r\n          });\r\n        });\r\n      }\r\n      self.turnList.sort(function(a, b) {\r\n        return (a.roll.total < b.roll.total) ?  1 : ((b.roll.total < a.roll.total) ? -1 : 0);\r\n      });\r\n      logger('Ordre des tours:');\r\n      let n = 1;\r\n      self.turnList.forEach(function(member){\r\n        logger(n + '. ' + member.combatant.id);\r\n        n += 1;\r\n      });\r\n    };\r\n    this.runRound = function(logger){\r\n      if (typeof logger == 'undefined'){\r\n        logger = function(string){};\r\n      }\r\n      logger('Prochain tour:');\r\n      let self = this;\r\n      self.turnList.forEach(function(current_combatant){\r\n        let combatant = current_combatant.combatant;\r\n        let party_id = current_combatant.party_id;\r\n        Capacité(combatant,logger);\r\n        combatant.tickBuffs();\r\n        combatant.reacted = false;\r\n        Malus(combatant,logger);\r\n        if (!combatant.isDead()){\r\n          let opponentParties = [];\r\n          for (let p_id in self.parties){\r\n            if (party_id !== p_id){\r\n              opponentParties.push(self.parties[p_id]);\r\n            }\r\n          }\r\n          let opponents = [];\r\n          opponentParties.forEach(function(party){\r\n            party.members.forEach(function(member){\r\n              if (!member.isDead()){\r\n                opponents.push(member);\r\n              }\r\n            });\r\n          });\r\n          if(combatant.stun.etat){\r\n            logger(combatant.id+'est Étourdi.');\r\n            combatant.isStun(combatant.stun.mod);\r\n          }else{\r\n            let atkch = combatant.attackChoice();\r\n            for(let i=0;i<atkch.rof;i++){\r\n              let target = self.parties[party_id].selectTarget(opponents,combatant.strat);\r\n              if (typeof target == 'undefined'){\r\n                return;\r\n              }\r\n              let atk = combatant.attackRoll(atkch);\r\n              let atkRoll = atk.total;\r\n              let def = target.defRoll();\r\n              let defRoll = def.total;\r\n              if (target.isHit(atkRoll,defRoll)){\r\n                let damage = new Attack(atkch,atkRoll,defRoll,target,combatant.monstre);\r\n                target.ac--;\r\n                if(target.ac<0){target.ac=0;}\r\n                target.takeDamage(damage.total);\r\n                logger('- '+combatant.id + ' touche ' + target.id + ' et inflige ' + damage.total + ' points de dégâts à '+ damage.loc + '.');\r\n                logger('Jet d\\'attaque: '+JSON.stringify(atk.valeur)+'+'+atk.brut +' vs Jet défense: '+JSON.stringify(def.valeur)+\"+\"+def.brut);\r\n                damage.desc.monstre ? logger('Dégats: '+JSON.stringify(damage.desc.dmg)+damage.desc.armor+' '+damage.desc.loc+' /2 [Résistance] +'+damage.desc.crit) : logger('Dégats: '+JSON.stringify(damage.desc.dmg)+damage.desc.armor+' '+damage.desc.loc+' +'+damage.desc.crit);\r\n              } else {\r\n                logger('- '+combatant.id + ' rate ' + target.id + '.');\r\n                logger('Jet d\\'attaque: '+JSON.stringify(atk.valeur)+'+'+atk.brut +' vs Jet défense: '+JSON.stringify(def.valeur)+\"+\"+def.brut);\r\n              }\r\n            };\r\n          }\r\n        }\r\n        combatant.resetMalus();\r\n        combatant.checkBuffs();\r\n      });\r\n    };\r\n    this.runFight = function(logger){\r\n      if (typeof logger == 'undefined'){\r\n        logger = function(string){};\r\n      }\r\n      this.initiateCombat(logger);\r\n      let anticrash = 0;\r\n      while(this.isFightOnGoing()){\r\n        this.runRound(logger);\r\n        anticrash++;\r\n        if(anticrash===10){\r\n          break;\r\n        }\r\n      }\r\n      this.survivorsStats(logger);\r\n      return this.survivors();\r\n  \r\n    };\r\n    this.isFightOnGoing = function(){\r\n      let alive = {};\r\n      for ( let c in this.turnList ) {\r\n        if (!this.turnList[c].combatant.isDead()){\r\n          alive[this.turnList[c].party_id] = 1;\r\n          if (Object.keys(alive).length > 1){\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    this.survivorsStats = function(logger){\r\n      logger('Liste des Survivants:');\r\n      let dead = [];\r\n      for ( let c in this.turnList ) {\r\n        if (!this.turnList[c].combatant.isDead()){\r\n          let e = this.turnList[c].combatant;\r\n          logger(e.id+\" - PS: \"+e.stats.hp()+\"/\"+e.max_hp+\" ; PA: \"+e.stats.ac()+\"/\"+e.max_ac);\r\n        }else{\r\n          dead.push(this.turnList[c].combatant);\r\n        }\r\n      }\r\n      logger('Morts:');\r\n      dead.forEach(function(e){\r\n        logger(e.id+\" - PS: \"+e.stats.hp()+\"/\"+e.max_hp+\" ; PA: \"+e.stats.ac()+\"/\"+e.max_ac);\r\n      });\r\n    }\r\n    this.survivors = function(){\r\n      let alive = [];\r\n      for ( let c in this.turnList ) {\r\n        if (!this.turnList[c].combatant.isDead()){\r\n          alive.push(this.turnList[c]);\r\n        }\r\n      }\r\n      return alive;\r\n    };\r\n    this.reset = function(){\r\n      this.turnList = [];\r\n      let self = this;\r\n      for (let party in self.parties){\r\n        self.parties[party].members.forEach(function(combatant){\r\n          combatant.reset();\r\n        });\r\n      }\r\n    };\r\n};","const dice = require('./dice_roller');\r\n// Calcul des dégâts!\r\nmodule.exports = function(atk,attackRoll,defRoll,cible,monster){\r\n  let jet = dice(atk.dice).expl();\r\n  let roll = Number(jet.total);\r\n  let desc = {dmg:jet.valeur};\r\n  desc.dmg.push(Number(jet.brut));\r\n  var loca = \"Aléatoire\";\r\n  \tif(this.FP){roll *= 2;desc.dmg.push('x2');}\r\n\troll -= Number(cible.ac);\r\n\tdesc.armor=(-cible.ac);\r\n\tif(roll<=0){\r\n\t\troll=0;\r\n\t\tloca=\"|Armure > DMG|\";\r\n\t}else{\r\n\t\tlet loc;\r\n\t\tif(atk.viser === \"Aléatoire\"){\r\n\t\t\tloc = dice('1d10').total;\r\n\t\t\tif(loc===1){loc=3;}else if(loc<=4){loc=1;}else{loc=0.5;}\r\n\t\t}else{\r\n\t\t\tif(atk.viser === \"Tête\"){loc=3}\r\n\t\t\tif(atk.viser === \"Torse\"){loc=1}\r\n\t\t\tif(atk.viser === \"Membre\"){loc=0.5}\r\n\t\t}\r\n\t\troll *= loc;desc.loc=('x'+loc);\r\n\t\tif(loc===3){loca=\"Tête\";}else if(loc===1){loca=\"Torse\";}else{loca=\"Membre\";}\r\n\t}\r\n\tif(monster){\r\n\t\troll *= 0.5;\r\n\t\tdesc.monstre = '/2';\r\n\t}\r\n\tlet cc = 0;\r\n\tlet diff = Number(attackRoll)-Number(defRoll);\r\n\tif(diff < 7){}else if(diff<10){cc=3;}else if(diff<13){cc=5;}else if(diff<15){cc=8;}else{cc=10;}\r\n\tdesc.crit=cc;\r\n\r\n\tlet effets = ['feu','sang','poison'];\r\n\teffets.forEach(function(el){\r\n\t\tif(atk.effet[el]){\r\n\t\t\tlet r = dice('1d100');\r\n\t\t\tif(r <= atk.effet[el+'ID']){\r\n\t\t\t\tcible.malus[el] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n  return {total:Number(Number(roll)+Number(cc)),loc:loca,desc:desc};\r\n};","const Buff = require('./buff');\r\n\r\nmodule.exports = function(combatant,logger){\r\n\r\n    function Regen(e){\r\n        combatant.hp += Number(e);\r\n        if(combatant.hp > combatant.max_hp){combatant.hp = combatant.max_hp;}            \r\n        console.log('Regen enclenché!');\r\n    }\r\n    //  Format: name    effet\r\n\r\n    if(combatant.capacité.regen){\r\n        Regen(combatant.capacité.regenID);\r\n    }\r\n    if(combatant.capacité.fureur){\r\n        if(combatant.hp<10){\r\n            logger('Fureur enclenché pour '+combatant.id+'!');\r\n            Regen(3);\r\n        }\r\n    }\r\n    if(combatant.capacité.embush){\r\n        combatant.addBuff(new Buff('Embuscade',1,{initiative:2}));\r\n    }\r\n};","module.exports = function(name, time, bonus){\r\n    this.name = name;\r\n    this.time = time;\r\n    this.bonus = bonus;\r\n};","module.exports = function(combatant,logger){\r\n    if(combatant.malus.feu){\r\n        // -5 DMG\r\n        combatant.takeDamage(5);\r\n        logger('Incinération: -5 PS');\r\n    }\r\n    if(combatant.malus.sang){\r\n        // -2 DMG\r\n        combatant.takeDamage(2);\r\n        logger('Saignement: -2 PS');\r\n    }\r\n    if(combatant.malus.poison){\r\n        // -3 DMG\r\n        combatant.takeDamage(3);\r\n        logger('Empoisonné: -3 PS');\r\n    }\r\n};","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    '& > * + *': {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nexport function SimpleAlerts(props) {\r\n  const classes = useStyles();\r\n  let data = props.data;\r\n  if(data){\r\n    return (\r\n        <div className={classes.root}>\r\n          <Alert severity=\"error\"> {data} </Alert>\r\n        </div>\r\n    );\r\n  }else{\r\n    return(<span></span>);\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport {CheckMb} from './formcheck.js';\r\nimport {SimpleAlerts} from './formalert.js';\r\n\r\nimport Bestiaire from './bestiaire.json';\r\nconst Prétired = require('./prétiré.js');\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    '& .MuiTextField-root': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  mt:{\r\n    marginTop: '15px',\r\n  },\r\n  fr:{\r\n    textAlign: 'right',\r\n  },\r\n  grid:{\r\n    flexGrow: 1,\r\n  },\r\n  center:{\r\n    textAlign: 'center',\r\n  },\r\n  centerBlock:{\r\n    display: 'block',\r\n    margin: '0 auto',\r\n  },\r\n});\r\n\r\nfunction TryCheck(props){\r\n  let {addMember, state, err, base} = props;\r\n\r\n  let tryTrycheck = function(){\r\n    let a = CheckMb(state,base);\r\n    if(a.sortie){\r\n      // ajout du PJ\r\n      err(null);\r\n      delete state.prétiré;\r\n      delete state.anchorEl;\r\n      delete state.anchorEl2;\r\n      delete state.anchorEl3;\r\n      delete state.err;\r\n      addMember(state)\r\n    }else{\r\n      err(a.error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fab \r\n      color=\"primary\"\r\n      aria-label=\"add\"\r\n      title=\"Ajouter le participant\"\r\n      onClick={tryTrycheck}\r\n      style={{display: 'block',margin: '0 auto',}}\r\n    >\r\n      <AddIcon />\r\n    </Fab>\r\n  )\r\n}\r\n\r\nclass Example extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groupe: '',\r\n      id: '',\r\n      ps: '',\r\n      pa: '',\r\n      initiative: '',\r\n      def: '',\r\n      etou: '',\r\n      atk: [{atk:'',dice:'',rof:'',FR:false,FP:false,viser:'Aléatoire',effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: 0}}],\r\n      monstre: false,    // true || false\r\n      capacité: {regen: false, fureur: false, embush: false, regenID: ''},    // list\r\n      strat: 'Aléatoire',\r\n      position: '',\r\n      child_atk: 1,       // nombre d'attaques !\r\n      prétiré: false,\r\n      anchorEl: null,\r\n      anchorEl2: null,\r\n      anchorEl3: null,\r\n      err: null,\r\n    };\r\n    this.handleErr = this.handleErr.bind(this);\r\n  }\r\n\r\n  handleClick = e => (event) => {\r\n    this.setState({[e]:event.currentTarget});\r\n  };\r\n\r\n  handleErr(e) {\r\n    this.setState({ err: e});\r\n  }\r\n\r\n  handleClose = e => () => {\r\n    this.setState({[e]:null});\r\n  };\r\n  \r\n  // handle input change\r\n  handleInputChange = (e, index) => {\r\n    let { name, value } = e.target;\r\n    const list = this.state.atk;\r\n\r\n    let tableEffet = ['poison', 'poisonID', 'feu', 'feuID', 'sang', 'sangID', \"pré\", \"préID\"];\r\n    if(tableEffet.includes(name)){\r\n      if(!value){\r\n        // checked !\r\n        value = e.target.checked;\r\n      }\r\n      list[index]['effet'][name]=value;\r\n    }else{\r\n      if(!value){\r\n        // checked !\r\n        value = e.target.checked;\r\n      }      \r\n      list[index][name] = value;\r\n    }\r\n    this.setState({atk:list});\r\n  };\r\n  handleChange = (e) => {\r\n    let { name, value } = e.target;\r\n    if(!value){value = e.target.checked}\r\n    this.setState({[name]:value});\r\n  };\r\n\r\n  handleAsynChange = (event, values) => {\r\n    this.setState({groupe: values});\r\n  }\r\n  handleAsynChange2 = (event, values) => {\r\n    this.setState({prétiré: values});\r\n  }\r\n\r\n  // handle click event of the Remove button\r\n  handleRemoveClick = index => {\r\n    const list = this.state.atk;\r\n    list.splice(index, 1);\r\n    this.setState({atk:list});\r\n  };\r\n\r\n  // handle click event of the Add button\r\n  handleAddClick = () => {\r\n    const list = this.state.atk;\r\n    list.push({\r\n      atk:'',\r\n      dice:'',\r\n      rof:'',\r\n      FR:false,\r\n      FP:false,\r\n      viser:'Aléatoire',\r\n      effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: ''},\r\n    });\r\n    this.setState({atk:list});\r\n  };\r\n\r\n  checkPrétiré = () => {\r\n    let prétiré = this.state.prétiré;\r\n    if(prétiré){\r\n      var found = Bestiaire.find(e => e.Nom === prétiré);\r\n      if(found){\r\n        let def = Prétired(found).def();\r\n        let atk = Prétired(found).atq();;\r\n        let child;  found.Arme ? child = found.Arme.length : child = 0;\r\n        let capacité =  {regen: false, fureur: false, embush: false, regenID: ''};\r\n        let monster; found.Monstre ? monster = true : monster = false;\r\n        this.setState({\r\n          'id': found.Nom,\r\n          'ps': found.Caract.PS,\r\n          'pa': found.Armure,\r\n          'initiative': found.Caract.RÉF,\r\n          'def': def,\r\n          'etou': found.Caract.ÉTOU,\r\n          'atk': atk,\r\n          'monstre': monster,\r\n          'capacité': capacité,\r\n          'strat': 'Aléatoire',\r\n          'position': child\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // Checkbox à la main\r\n  checkCheck = input => e => {\r\n    let capacité = this.state.capacité;\r\n    capacité[input] ? capacité[input]=false : capacité[input]=true;\r\n    this.setState({'capacité': capacité});\r\n\r\n  }\r\n  checkChecked = (e) => {\r\n    let {value} = e.target;\r\n    let capacité = this.state.capacité;\r\n    capacité.regenID = value;\r\n    this.setState({'capacité': capacité});\r\n  };\r\n\r\n  render() {\r\n    const { values, addMember } = this.props;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <form className={classes.root} noValidate autoComplete=\"off\">\r\n          <div className={classes.grid}>\r\n            <Grid container spacing={3}>\r\n              <Grid item xs>\r\n                <Autocomplete\r\n                  options={values.group}\r\n                  freeSolo\r\n                  name=\"groupe\" onInputChange={this.handleAsynChange}\r\n                  style={{ width: 300 }}\r\n                  renderInput={(params) => <TextField {...params} name=\"groupe\" label=\"Nom du groupe\" variant=\"outlined\" />}\r\n                />\r\n              </Grid>\r\n              <Grid item xs>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.id} name=\"id\" type=\"text\"\r\n                  label=\"Nom du Combattant\"\r\n                  onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs className={classes.mt}>\r\n                <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" variant=\"outlined\" onClick={this.handleClick('anchorEl')}>\r\n                    Pré-tiré\r\n                </Button>\r\n                <Menu\r\n                    id=\"simple-menu\"\r\n                    anchorEl={this.state.anchorEl}\r\n                    keepMounted\r\n                    open={Boolean(this.state.anchorEl)}\r\n                    onClose={this.handleClose('anchorEl')}\r\n                >\r\n                  <MenuItem>\r\n                    <Autocomplete\r\n                      name=\"prétiré\"\r\n                      options={Bestiaire}\r\n                      getOptionLabel={(option) => option.Nom}\r\n                      style={{ width: 300 }}\r\n                      onInputChange={this.handleAsynChange2}\r\n                      renderInput={(params) => <TextField {...params} label=\"Nom du pré-tiré\" variant=\"outlined\" />}\r\n                    />\r\n                  </MenuItem>\r\n                  <MenuItem>\r\n                      <Button variant=\"contained\" color=\"primary\" onClick={this.checkPrétiré}>\r\n                        Ajouter\r\n                      </Button>\r\n                  </MenuItem>\r\n                  </Menu>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3} className={classes.center}>\r\n              <Grid item xs>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.ps} name=\"ps\" type=\"text\" label=\"Points de santé\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.pa} name=\"pa\" type=\"text\" label=\"Pouvoir d'arrêt\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.initiative} name=\"initiative\" type=\"text\" label=\"Initiative\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.def} name=\"def\" type=\"text\" label=\"Base Défense\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.etou} name=\"etou\" type=\"text\" label=\"Étourdissement\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            {this.state.atk.map((x, i) => {\r\n                // {atk:1,dice:1d6+2,rof:1,FR:false,FP:true,viser:false}\r\n                return (\r\n                  <div key={i} >\r\n                    <hr/>\r\n                  <Grid container spacing={3}>\r\n                    <Grid item xs={4}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        value={this.state.atk[i].atk} type=\"number\" label=\"Base Attaque\" name=\"atk\"\r\n                        onChange={e => this.handleInputChange(e, i)}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        value={this.state.atk[i].dice} type=\"text\" label=\"DÉG\" placeholder=\"1d6+2\" name=\"dice\"\r\n                        onChange={e => this.handleInputChange(e, i)}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        value={this.state.atk[i].rof} type=\"number\" label=\"Att/tour\" name=\"rof\"\r\n                        onChange={e => this.handleInputChange(e, i)}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid container spacing={3}>\r\n                    <Grid item xs>       \r\n                      <FormControlLabel\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.atk[i].FR}\r\n                            type=\"checkbox\"\r\n                            name=\"FR\"\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Frappe Rapide\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                      <FormControlLabel\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.atk[i].FP}\r\n                            type=\"checkbox\"\r\n                            name=\"FP\"\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Frappe Puissante\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                      <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                        <InputLabel id=\"select-Vise-label\">Viser:</InputLabel>\r\n                        <Select\r\n                          labelId=\"select-Vise-label\"\r\n                          value={this.state.atk[i].viser}\r\n                          onChange={e => this.handleInputChange(e, i)}\r\n                          label=\"Viser:\"\r\n                          name=\"viser\"\r\n                        >\r\n                          <MenuItem value={'Aléatoire'}>Aléatoire</MenuItem>\r\n                          <MenuItem value={'Tête'}>Tête</MenuItem>\r\n                          <MenuItem value={'Torse'}>Torse</MenuItem>\r\n                          <MenuItem value={'Membre'}>Membre</MenuItem>\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                    <Grid item xs className={classes.mt}>\r\n                      <Button aria-controls=\"simple-menu-effets\" aria-haspopup=\"true\" variant=\"outlined\" onClick={this.handleClick('anchorEl2')}>\r\n                        Effets\r\n                      </Button>\r\n                      <Menu\r\n                          id=\"simple-menu-effets\"\r\n                          anchorEl={this.state.anchorEl2}\r\n                          keepMounted\r\n                          open={Boolean(this.state.anchorEl2)}\r\n                          onClose={this.handleClose('anchorEl2')}\r\n                      >\r\n                        <MenuItem>\r\n                          <FormControlLabel\r\n                          control={\r\n                            <Checkbox\r\n                            name=\"poison\" checked={this.state.atk[i].effet.poison} onClick={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                            />\r\n                          }\r\n                          label=\"Empoisonné\"\r\n                          />\r\n                          <TextField\r\n                            variant=\"outlined\"\r\n                            type=\"number\" label=\"%\" name=\"poisonID\" value={this.state.atk[i].effet.poisonID} \r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                          />\r\n                        </MenuItem>\r\n                        <MenuItem>\r\n                          <FormControlLabel\r\n                          control={\r\n                            <Checkbox\r\n                            name=\"feu\" checked={this.state.atk[i].effet.feu} onClick={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                            />\r\n                          }\r\n                          label=\"Incinération\"\r\n                          />\r\n                          <TextField\r\n                            variant=\"outlined\"\r\n                            type=\"number\" label=\"%\" name=\"feuID\" value={this.state.atk[i].effet.feuID}\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                          />\r\n                        </MenuItem>\r\n                          <MenuItem>\r\n                            <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                              name=\"sang\" checked={this.state.atk[i].effet.sang} onClick={e => this.handleInputChange(e, i)}\r\n                              color=\"primary\"\r\n                              />\r\n                            }\r\n                            label=\"Saignement\"\r\n                            />\r\n                            <TextField\r\n                            variant=\"outlined\"\r\n                            type=\"number\" label=\"%\" name=\"sangID\" value={this.state.atk[i].effet.sangID}\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                            />\r\n                          </MenuItem>\r\n                          <MenuItem>\r\n                            <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                              name=\"pré\" checked={this.state.atk[i].effet.pré} onClick={e => this.handleInputChange(e, i)}\r\n                              color=\"primary\"\r\n                              />\r\n                            }\r\n                            label=\"Précision\"\r\n                            />\r\n                            <TextField\r\n                              variant=\"outlined\"\r\n                              value={this.state.atk[i].effet.préID}\r\n                              type=\"number\"\r\n                              label=\"Valeur Précision\"\r\n                              name=\"préID\"\r\n                              onChange={e => this.handleInputChange(e, i)}\r\n                            />\r\n                          </MenuItem>\r\n                        </Menu>\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid className={classes.fr}>\r\n                    {this.state.child_atk.length !== 1 && <IconButton aria-label=\"delete\" className={classes.margin} onClick={() => this.handleRemoveClick(i)}>\r\n                     <DeleteIcon />\r\n                   </IconButton>}\r\n                  </Grid>\r\n                  </div>\r\n                )}\r\n            )}\r\n            <hr />\r\n            <Grid className={classes.fr}>\r\n                <Fab variant=\"extended\" color=\"primary\" aria-label=\"add\" onClick={this.handleAddClick}>\r\n                  Ajouter une attaque\r\n                </Fab>\r\n            </Grid>\r\n            <br />\r\n            <Grid container spacing={3}>\r\n              <Grid item xs>       \r\n                <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={this.state.monstre}\r\n                        name=\"monstre\"\r\n                        type=\"checkbox\"\r\n                        onChange={e => this.handleChange(e)}\r\n                        color=\"primary\"\r\n                      />\r\n                    }\r\n                    label=\"Monstre\"\r\n                />\r\n              </Grid>\r\n              <Grid item xs>\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    value={this.state.position}\r\n                    name=\"position\"\r\n                    type=\"number\"\r\n                    label=\"Positionnement\"\r\n                    min=\"1\"\r\n                    onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs>\r\n                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                  <InputLabel id=\"select-strat-label\">Stratégie:</InputLabel>\r\n                  <Select\r\n                      labelId=\"select-strat-label\"\r\n                      value={this.state.strat}\r\n                      name=\"strat\"\r\n                      label=\"Stratégie:\"\r\n                      onChange={e => this.handleChange(e)}\r\n                  >\r\n                    <MenuItem value={'Aléatoire'}>Aléatoire</MenuItem>\r\n                    <MenuItem value={'Moins de PS'}>Moins de PS</MenuItem>\r\n                    <MenuItem value={'Moins de PA'}>Moins de PA</MenuItem>\r\n                    <MenuItem value={'Première ligne'}>Première ligne</MenuItem>\r\n                    <MenuItem value={'Dernière ligne'}>Dernière ligne</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs className={classes.mt}>\r\n                <Button aria-controls=\"simple-menu-capa\" aria-haspopup=\"true\" variant=\"outlined\" onClick={this.handleClick('anchorEl3')}>\r\n                  Effets\r\n                </Button>\r\n                <Menu\r\n                      id=\"simple-menu-capa\"\r\n                      anchorEl={this.state.anchorEl3}\r\n                      keepMounted\r\n                      open={Boolean(this.state.anchorEl3)}\r\n                      onClose={this.handleClose('anchorEl3')}\r\n                    >\r\n                    <MenuItem>\r\n                      <FormControlLabel\r\n                        onClick={this.checkCheck('regen')}\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.capacité.regen}\r\n                            type=\"checkbox\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Régénération\"\r\n                      />\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        onChange={e => this.checkChecked(e)}\r\n                        type=\"number\"\r\n                        placeholder=\"Valeur\"\r\n                      />\r\n                    </MenuItem>\r\n                    <MenuItem>\r\n                      <FormControlLabel\r\n                        onClick={this.checkCheck('fureur')}\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.capacité.fureur} \r\n                            type=\"checkbox\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Fureur\"\r\n                      />\r\n                    </MenuItem>\r\n                    <MenuItem>\r\n                      <FormControlLabel\r\n                        onClick={this.checkCheck('embush')}\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.capacité.embush}\r\n                            type=\"checkbox\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Embuscade\"\r\n                      />\r\n                    </MenuItem>\r\n                  </Menu>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid>\r\n              <TryCheck state={this.state} addMember={addMember()} err={this.handleErr} base={values} />\r\n            </Grid>\r\n          </div>\r\n        </form>\r\n        <SimpleAlerts data={this.state.err} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true})(Example);","/*\r\n    groupe: '',\r\n    id: '',\r\n    ps: '',\r\n    pa: '',\r\n    initiative: '',\r\n    def: '',\r\n    etou: '',\r\n    atk: [{atk:'',dice:'',rof:'',FR:false,FP:false,viser:'Aléatoire',effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: 0}}],\r\n    monstre: '',    // true || false\r\n    capacité: {regen: false, fureur: false, embush: false, regenID: ''},    // list\r\n    strat: 'Aléatoire',\r\n    position: '',\r\n*/      \r\nexport function CheckMb(e,base){\r\n    let sortie = true, err = \"\";\r\n    if(!e.groupe){sortie=false;err += \"Pas de groupe. \";}\r\n    if(!e.id){sortie=false;err += \"Pas de nom. \";}else{\r\n        let found = base.member.find(element => element.id === e.id);\r\n        if(found){sortie=false;err += \"Nom déjà utilisé. \";}\r\n    }\r\n    if(!e.ps){sortie=false;err += \"Pas de PS. \";}\r\n    if(!e.pa){sortie=false;err += \"Pas de PA. \";}\r\n    if(!e.initiative){sortie=false;err += \"Pas d'initiative. \";}\r\n    if(!e.def){sortie=false;err += \"Pas de Base DÉF. \";}\r\n    if(!e.etou){sortie=false;err += \"Pas de Base ÉTOU. \";}\r\n    if(!e.position){sortie=false;err += \"Pas d'ordre de positionnement. \";}\r\n\r\n    e.atk.forEach(i => {\r\n        if(!i.atk){sortie=false;err += \"Pas de Base ATQ. \";}        \r\n        if(!i.dice){sortie=false;err += \"Pas de DÉG. \";}\r\n        if(!i.rof){sortie=false;err += \"Pas d'Att/tour. \";}        \r\n    });\r\n    return {sortie: sortie, error: err}\r\n};","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TreeView from '@material-ui/lab/TreeView';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport TreeItem from '@material-ui/lab/TreeItem';\r\nimport SecurityIcon from '@material-ui/icons/Security';\r\n\r\nfunction Test(props){\r\n  let e = props.data;\r\n  let ee = props.dataSur;\r\n  let groupePJ = props.group[0];\r\n  let clé = Object.keys(e);\r\n\r\n  let ordre = {};\r\n  let detail = {};\r\n  let surv = {};\r\n  let dc = {};\r\n  clé.forEach(function(k){\r\n    let array1 = e[k];\r\n    let indexA = array1.findIndex((element) => element === \"Ordre des tours:\");\r\n    let indexB = array1.findIndex((element) => element === \"Prochain tour:\");\r\n    let indexC = array1.findIndex((element) => element === \"Liste des Survivants:\");\r\n    let indexD = array1.findIndex((element) => element === \"Morts:\");\r\n\r\n    ordre[k] = (array1.slice(indexA+1, indexB));\r\n    detail[k] = (array1.slice(indexB+1, indexC));\r\n    surv[k] = (array1.slice(indexC+1, indexD));\r\n    dc[k] = (array1.slice(indexD+1));\r\n  });\r\n  return clé.map((k,i) =>\r\n    <TreeItem key={'clé-'+i} nodeId={k} label={bouclier(k,ee[k],groupePJ)}>\r\n      <TreeItem nodeId={k+\"-1\"} label=\"Ordre des tours:\">\r\n        <TreeItem nodeId={k+\"-1-1\"} label={test2(ordre[k])} />\r\n      </TreeItem>\r\n      <TreeItem nodeId={k+\"-2\"} label=\"Détails des tours\">\r\n        <TreeItem nodeId={k+\"-2-1\"} label={test2(detail[k])}/>\r\n      </TreeItem>\r\n      <TreeItem nodeId={k+\"-3\"} label=\"Survivants\">\r\n        <TreeItem nodeId={k+\"-3-1\"} label={test2(surv[k])} />\r\n      </TreeItem>\r\n      <TreeItem nodeId={k+\"-4\"} label=\"Morts\">\r\n        <TreeItem nodeId={k+\"-4-1\"} label={test2(dc[k])}/>\r\n      </TreeItem>\r\n    </TreeItem>\r\n  );\r\n}\r\n\r\nfunction test2(e){\r\n  let sortie = [];\r\n    e.forEach(function(i){\r\n      if(i===\"Prochain tour:\"||i===\"Liste des Survivants:\"){\r\n        sortie.push(<div><hr /><b><u>{i}</u></b></div>);\r\n      }else if(i===\"Morts:\"){\r\n        sortie.push(<div><b><u>{i}</u></b></div>);\r\n      }else{\r\n        sortie.push(<div>{i}</div>);\r\n      }\r\n    });\r\n  return (\r\n    <div>\r\n      {sortie}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction bouclier(k,e,groupe){\r\n  if(e===groupe){\r\n    return (\r\n      <div>\r\n      Combat n°{k} ~ <SecurityIcon color=\"primary\" />\r\n      </div>\r\n    )\r\n  }else{\r\n    return (\r\n      <div>\r\n      Combat n°{k} ~ <SecurityIcon color=\"secondary\" />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: 240,\r\n    flexGrow: 1,\r\n  },\r\n  grid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: '50% 50%',\r\n  },\r\n  block: {\r\n    display: 'block',\r\n  },\r\n});\r\n\r\nexport default function FileSystemNavigator(props) {\r\n  const classes = useStyles();\r\n  const { values } = props;\r\n  if(values.logs){\r\n    return (\r\n      <div className={classes.grid}>\r\n        <TreeView\r\n          className={classes.root}\r\n          defaultCollapseIcon={<ExpandMoreIcon />}\r\n          defaultExpandIcon={<ChevronRightIcon />}\r\n        >\r\n          <Test data={values.logs.log} dataSur={values.logs.survivor} group={values.group} />\r\n        </TreeView>\r\n        <div>\r\n          <h3>\r\n            % de victoire:\r\n          </h3>\r\n          <List component=\"nav\" aria-label=\"secondary mailbox folders\">\r\n            {values.logs.ratio.map((x, i) => {\r\n              return (             \r\n                  <ListItem key={i} button>\r\n                    <ListItemText primary={x} />\r\n                  </ListItem>\r\n              )}\r\n            )}\r\n          </List>\r\n        </div>\r\n      </div> \r\n    );\r\n  }else{\r\n    return (<span></span>);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nexport function FormDialog(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const {data,del,edit} = props;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n        <div style={{display: 'block', margin: '0 auto', textAlign: 'center'}}>\r\n            <IconButton aria-label=\"edit\" onClick={handleClickOpen} title=\"Éditer le combatant\">\r\n                <EditIcon />\r\n            </IconButton>\r\n            <IconButton aria-label=\"delete\" title=\"Supprimer le combatant\" >\r\n                <DeleteIcon onClick={e => del(data,e)}/>\r\n            </IconButton>\r\n        </div>\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Edition du Combatant</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Vous pouvez modifier les statistiques de {data.id}. \r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Email Address\"\r\n            type=\"email\"\r\n            fullWidth\r\n          />\r\n        </DialogContent>\r\n        <DialogActions onClick={handleClose}>\r\n          <Button color=\"primary\">\r\n            Annuler\r\n          </Button>\r\n          <Button onClick={e => edit(data,e)} color=\"primary\">\r\n            Modifier\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {FormDialog} from './partipopedit.js';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    border: '1px solid',\r\n    padding: theme.spacing(1),\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  typography: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction Atq(props){\r\n  let d = props.data;\r\n  if(d.length > 0){\r\n    // atk: [{atk:'',dice:'',rof:'',FR:false,FP:false,viser:'Aléatoire',\r\n    // effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: 0}}],\r\n    let a = [<b>Attaque:</b>];\r\n    d.forEach(e => {\r\n      a.push(\"- Base ATQ: \"+e.atk);\r\n      a.push(\"- DÉG: \"+e.dice);\r\n      a.push(\"- Att/tour: \"+e.rof);\r\n      if(e.FR){a.push(\"- Frappe Rapide\");}\r\n      if(e.FP){a.push(\"- Frappe Puissance\");}\r\n      a.push(\"- Viser: \"+e.viser);\r\n      if(e.effet.poison || e.effet.feu ||e.effet.sang || e.effet.pré){\r\n        a.push(\"Effet:\");\r\n        if(e.effet.pré){a.push(\"- PRÉ: \"+e.effet.préID)}\r\n        if(e.effet.poison){a.push(\"- Poison: \"+e.effet.poisonID)}\r\n        if(e.effet.feu){a.push(\"- Enflammer: \"+e.effet.feuID)}\r\n        if(e.effet.sang){a.push(\"- Saignement: \"+e.effet.sangID)}\r\n      }\r\n      a.push(<hr />);\r\n    });\r\n    return a.map((x,i) => \r\n      <div key={i}>\r\n        {x}\r\n      </div>\r\n    )\r\n  }else{\r\n    return (<div>Pas d'Attaque...</div>)\r\n  }\r\n}\r\n\r\nfunction Capa(props){\r\n  let d = props.data;\r\n  //  capacité: {regen: false, fureur: false, embush: false, regenID: ''}\r\n  if(d.regen || d.fureur || d.embush){\r\n    let a = [<b>Capacité: </b>];\r\n    if(d.regen){\r\n      a.push('Regénération ('+d.regenID+')');\r\n    }\r\n    if(d.fureur){a.push(\"Fureur\");}\r\n    if(d.embush){a.push(\"Embuscade\");}\r\n    return a.map((x,i) => \r\n      <span key={i}>\r\n        {x}\r\n      </span>\r\n    )\r\n  }else{\r\n    return (<span></span>);\r\n  }\r\n}\r\n\r\nexport function SimplePopper(props) {\r\n  var {label,color,data, del,edit} = props;\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(anchorEl ? null : event.currentTarget);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popper' : undefined;\r\n\r\n  return (\r\n    <div>\r\n      <Chip label={label} color={color} aria-describedby={id} onClick={handleClick} />\r\n      <Popper id={id} open={open} anchorEl={anchorEl}>\r\n        <Paper>\r\n            <Typography className={classes.typography} component=\"div\">\r\n                Groupe: {data.groupe}\r\n                <br/>\r\n                PS: {data.ps}\r\n                <br/>\r\n                PA: {data.pa}\r\n                <br/>\r\n                Initiative: {data.initiative}\r\n                <br/>\r\n                Base DÉF: {data.def}\r\n                <br/>\r\n                Étourdissement: {data.etou}\r\n                <br/>\r\n                <Atq data={data.atk} />\r\n                {data.monstre ? \"Monstre\" : \"\"}\r\n                <br/>\r\n                Positionnement: {data.position}\r\n                <br/>\r\n                <Capa data={data.capacité} />\r\n                <FormDialog data={data} edit={edit} del={del} />\r\n            </Typography>\r\n        </Paper>\r\n      </Popper>\r\n    </div>\r\n  );\r\n}","const Combatant = require('../module/combatant');\r\nconst Party = require('../module/party');\r\nconst Combat = require('../module/combat');\r\n\r\nexport function Sim(group,members){\r\n  let c = new Combat();\r\n  group.forEach(function(e){\r\n    let p = new Party();\r\n    c.addParty(p, e);\r\n  });\r\n  members.forEach(function(e){\r\n\t\tlet new_combatant = new Combatant(e);\r\n    console.log(new_combatant);\r\n    c.parties[e.groupe].addMember(new_combatant);\r\n  });\r\n\r\n  let loggerdeloggi = {};\r\n  let loggeridex = 1;\r\n\r\n  let logginette = function(string){\r\n    loggerdeloggi[loggeridex].push(string)\r\n  };\r\n\r\n  let winners = [];\r\n  for(let index=0; index < 100; index++){\r\n    loggerdeloggi[loggeridex] = [];\r\n    winners.push(c.runFight(logginette));\r\n    c.reset();\r\n    loggeridex++;\r\n  }\r\n\r\n  let parties = {};\r\n  for (let party_id in c.parties){\r\n    parties[party_id] = 0;\r\n  }\r\n\r\n  let survivor = ['Survivants:'];\r\n\r\n  winners.forEach(function(winner_party){\r\n    survivor.push(winner_party[0].party_id);\r\n    parties[winner_party[0].party_id] += 1;\r\n  });\r\n\r\n  let winRatio = [];\r\n  for (let p in parties){\r\n    winRatio.push(p + ': ' + parties[p] + '%');\r\n  }\r\n  \r\n  return {\r\n    log:loggerdeloggi,\r\n    survivor: survivor,\r\n    ratio: winRatio\r\n  }\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { GetApp, RotateLeft } from '@material-ui/icons';\r\n\r\nimport {URLexportation} from './urlexpt.js';\r\nimport {SimplePopper} from './partipop.js';\r\nimport {Sim} from './sim.js';\r\n\r\nfunction PartiList(props){\r\n  let {data, del, edit} = props;\r\n  let aff = [];\r\n  let iColor = 0;\r\n  data.group.forEach(e => {\r\n    let color;\r\n    iColor === 0 ? color = \"primary\" : color = \"secondary\";\r\n    data.member.forEach(f => {\r\n      if(f.groupe === e){\r\n        aff.push(\r\n          <SimplePopper label={f.id} color={color} data={f} edit={edit} del={del}/>\r\n        );\r\n      }\r\n    });\r\n\r\n    iColor === 0 ? iColor++ : iColor=0;\r\n  });\r\n  return aff.map((x,i) =>\r\n  <div key={i} style={{columnCount:2}}>\r\n    {x}\r\n  </div>);\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  center: {\r\n    display: 'inherit',\r\n    textAlign: 'center',\r\n  }\r\n}));\r\n\r\nexport default function RecipeReviewCard(props) {\r\n  const classes = useStyles();\r\n  const { values, log, edit, del } = props;\r\n\r\n  const simulation = function() {\r\n    let sim = Sim(values.group,values.member);\r\n    log(sim);\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader\r\n        title=\"Liste des participants\"\r\n      />\r\n      <CardContent>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\r\n          <PartiList data={values} edit={edit} del={del} />\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions disableSpacing className={classes.center}>\r\n        <IconButton aria-label=\"Télécharger\" title=\"Sauvegarder\" onClick={() => {URLexportation(values.group, values.member)}}>\r\n          <GetApp />\r\n        </IconButton>\r\n        <Button onClick={simulation}>Simuler</Button>\r\n        <IconButton aria-label=\"Réinitialiser\" title=\"Réinitialiser\">\r\n          <RotateLeft />\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}","export function URLexportation(group, member){\r\n    let params = new URLSearchParams();\r\n    params.append('group', JSON.stringify(group));\r\n    params.append('member', JSON.stringify(member));\r\n    let adresseActuelle = window.location.origin+window.location.pathname+\"?\";\r\n\r\n    navigator.clipboard.writeText(adresseActuelle+encodeURI(params));\r\n    return (console.log('URL done'));\r\n};","export function URLi(){\r\n    let adresse = window.location.search;\r\n    if(adresse){\r\n        adresse = decodeURI(adresse);\r\n        let searchParams = new URLSearchParams(adresse);\r\n        let group = searchParams.get('group');\r\n        let member = searchParams.get('member');\r\n\r\n        group = JSON.parse(group);\r\n        member = JSON.parse(member);\r\n\r\n        return {group: group, member: member}\r\n    }else{\r\n        return 'RAS';\r\n    }\r\n};","import React, { Component } from 'react';\r\nimport Formulaire from './form';\r\nimport Render from './log';\r\nimport Participant from './participant';\r\n\r\nimport {URLi} from './urlimport.js';\r\n\r\nlet i = 0;\r\nfunction URLimp(data,handleChange){\r\n  if(i===0){\r\n    if(data.group && data.member){\r\n      handleChange('member',data.member);\r\n      handleChange('group',data.group);\r\n    }\r\n    i++;\r\n  }\r\n}\r\n\r\nexport class UserForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.addLog = this.addLog.bind(this);\r\n    this.editMb = this.editMb.bind(this);\r\n    this.delMb = this.delMb.bind(this);\r\n  }\r\n  state = {\r\n    member: [],\r\n    group: ['Les PJ','Les Monstres'],\r\n    logs: null,\r\n  };\r\n\r\n  // Handle fields change\r\n  handleChange = (input,val) => {\r\n    this.setState({ [input]: val });\r\n  };\r\n\r\n  addMember = input => e => {\r\n    let member = this.state.member;\r\n    member.push(e);\r\n    this.setState({member:member});\r\n  }\r\n  addLog(e) {\r\n    this.setState({logs:e});\r\n  }\r\n  editMb(e) {\r\n    let member = this.state.member;\r\n    let index = member.findIndex((element) => element.id === e.id);\r\n    member.splice(index, 1, e);\r\n    this.setState({member:member});\r\n  }\r\n  delMb(e) {\r\n    console.log(e);\r\n    let member = this.state.member;\r\n    let index = member.findIndex((element) => element.id === e.id);\r\n    member.splice(index, 1);\r\n    this.setState({member:member});\r\n  }\r\n\r\n\r\n  reinitialisation() {\r\n    this.setState({\r\n        member: [],\r\n        group: []\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { member, group, logs } = this.state;\r\n    const values = { member, group, logs };\r\n\r\n    return (\r\n        <div className=\"App\">\r\n          {URLimp(URLi(),this.handleChange)}\r\n          <div className=\"m-25\">\r\n            <Formulaire addMember={this.addMember} values={values} />\r\n          </div>\r\n          <div className=\"m-25\">\r\n            <hr />\r\n          </div>\r\n          <div className=\"m-25\">\r\n            <Participant values={values} log={this.addLog} edit={this.editMb} del={this.delMb} />\r\n          </div>\r\n          <div className=\"m-25\">\r\n            <hr />\r\n          </div>\r\n          <div className=\"m-10\">\r\n            <Render values={values} />\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserForm;","import './App.css';\nimport Render from './sim/render';\n\nfunction App() {\n  return (\n    <Render />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","function Rand(max) {\r\n  return Math.floor(Math.random() * max)+1;\r\n}\r\nconst reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n\r\nmodule.exports = function(e){\r\n  let dice = {};\r\n  dice.expression = e;\r\n  dice.valeur = [];\r\n  let formule = dice.expression.split('d');\r\n  let brut = formule[1].split('+');\r\n  if(!brut[1]){brut=formule[1].split('-');brut[1]= -brut[1];}\r\n  for(let i=0;i<formule[0];i++){\r\n      dice.valeur.push(Rand(brut[0]));\r\n  }\r\n  if(brut[1]){dice.brut=brut[1];}\r\n  dice.expl = function(){ // dé explosif sur 1 & max sur le 1er jet uniquement = format Witcher\r\n    if(dice.valeur[0]===1||dice.valeur[0]===brut[0]){\r\n      let roll = Rand(brut[0]);\r\n      dice.valeur.push(roll);\r\n      while(roll===1||roll===brut[0]){\r\n        roll=Rand(brut[0]);\r\n        dice.valeur.push(roll);\r\n      }\r\n    }\r\n    if(dice.valeur[0]===1){dice.Echec=true;}else if(dice.valeur[0]===brut[0]){dice.critique=true;}\r\n    dice.total = dice.valeur.reduce(reducer);if(dice.brut){dice.total+=Number(dice.brut);}\r\n    return dice;\r\n  }\r\n  dice.total = dice.valeur.reduce(reducer);\r\n  if(dice.brut){dice.total+=Number(dice.brut);}\r\n  return dice;\r\n}"],"sourceRoot":""}