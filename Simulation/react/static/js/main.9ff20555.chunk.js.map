{"version":3,"sources":["sim/form/prétiré.js","module/combatant.js","module/party.js","module/combat.js","module/attack.js","module/capacité.js","module/buff.js","module/malus.js","sim/form/formalert.js","sim/form.js","sim/form/formcheck.js","sim/input/Logpoper.js","sim/log.js","sim/participant/edition/partipopedit.js","sim/participant/edition/form.js","sim/participant/partipop.js","sim/participant/sim.js","sim/participant/modal.js","sim/participant.js","sim/participant/urlexpt.js","sim/render.js","App.js","reportWebVitals.js","index.js","module/dice_roller.js"],"names":["module","exports","found","sortie","REF","DEX","ESQ","ATH","MEL","BAG","Caract","RÉF","Compt","Athlétisme","Mêlée","Bagarre","valeur","push","Number","Math","max","Arme","forEach","e","atq","effect","poison","poisonID","feu","feuID","sang","sangID","pré","préID","argent","argentID","eff","searching","Effet","find","f","Nom","error","Base","DMG","regen","fureur","embush","regenID","Régénération","Capacités","dice","require","sumBuffs","self","stat","total","buffs","buff","bonus","data","this","id","hp","ps","max_hp","ac","pa","max_ac","initiative","atk","def","rof","capacité","monstre","strat","position","reacted","reactions","stun","etou","etat","mod","malus","addBuff","addReaction","reaction","checkBuffs","filter","time","tickBuffs","stats","parent","index","sum","SumAtk","rollInitiative","expl","attackChoice","posibilité","length","roll","floor","random","attackRoll","modificateurs","viser","FP","effet","dé","ret","defRoll","isHit","nextReaction","trigger","takeDamage","damageRoll","isDead","isStun","ETOU","resetMalus","reset","init","members","combatStrategies","lowest_hp","combatantA","combatantB","highest_hp","lowest_pa","lowest_position","highest_position","highest_dmg","dmgA","attacks","element","dmg","dice_type","dice_number","dmg_bonus","dmgB","addMember","combatant","selectTarget","opponents","sort","Attack","Capacité","Malus","parties","addParty","party","turnList","initiateCombat","logger","string","party_id","a","b","n","member","runRound","current_combatant","opponentParties","p_id","atkch","i","target","atkRoll","affichageBaseAtq","base","damage","loc","DMG_aff","desc","JSON","stringify","armor","crit","nom","brut","runFight","anticrash","isFightOnGoing","survivorsStats","survivors","alive","c","Object","keys","dead","cible","jet","jet2","err","console","log","loca","cc","diff","el","Buff","Regen","name","useStyles","makeStyles","theme","root","width","marginTop","spacing","SimpleAlerts","props","classes","className","Alert","severity","Prétired","TryCheck","state","Fab","color","aria-label","title","onClick","groupe","CheckMb","prétiré","anchorEl","anchorEl2","anchorEl3","style","display","margin","Example","handleClick","event","setState","currentTarget","handleClose","handleInputChange","value","list","includes","checked","handleChange","handleAsynChange","values","handleAsynChange2","handleRemoveClick","splice","handleAddClick","FR","checkPrétiré","Bestiaire","child","monster","Monstre","PS","Armure","checkCheck","input","checkChecked","child_atk","handleErr","bind","noValidate","autoComplete","grid","Grid","container","item","xs","Autocomplete","options","group","freeSolo","onInputChange","renderInput","params","TextField","label","placeholder","variant","type","onChange","mt","Button","aria-controls","aria-haspopup","Menu","keepMounted","open","Boolean","onClose","MenuItem","getOptionLabel","option","center","map","x","FormControlLabel","control","Checkbox","FormControl","formControl","InputLabel","Select","labelId","fr","IconButton","min","Component","withStyles","textAlign","flexGrow","centerBlock","withTheme","typography","padding","PositionedPopper","React","useState","setAnchorEl","setOpen","placement","setPlacement","newPlacement","prev","Popper","transition","TransitionProps","Fade","timeout","Paper","Typography","Atk","text1","text2","Test","ee","dataSur","groupePJ","clé","ordre","detail","surv","dc","k","array1","indexA","findIndex","indexB","indexC","indexD","slice","TreeItem","nodeId","bouclier","test2","height","gridTemplateColumns","block","FileSystemNavigator","logs","TreeView","defaultCollapseIcon","defaultExpandIcon","survivor","List","component","ratio","ListItem","button","ListItemText","primary","FormDialog","edit","del","handleInputChange2","handleInputChange3","listItems","v","listAtq","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","FormDialogModal","paper","border","backgroundColor","palette","background","Atq","d","Capa","SimplePopper","undefined","Chip","aria-describedby","Combatant","Party","Combat","code","setCode","change","Publish","autoFocus","fullWidth","parse","PartiList","aff","iColor","columnCount","RecipeReviewCard","Card","CardHeader","CardContent","CardActions","disableSpacing","expt","navigator","clipboard","writeText","URLexportation","GetApp","sim","p","new_combatant","loggerdeloggi","loggeridex","logginette","winners","winner_party","winRatio","Sim","RotateLeft","UserForm","val","GroupList","addLog","editMb","delMb","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","Rand","reducer","accumulator","currentValue","expression","formule","split","Echec","critique","reduce"],"mappings":"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","file":"static/js/main.9ff20555.chunk.js","sourcesContent":["module.exports = function(found){\r\n    let sortie = {};\r\n    sortie.def = function() {\r\n        // Esquive (REF) ||  Athlétisme (DEX)  ||  Mêlée (REF)   ||  Bagarre (REF)\r\n        let REF,DEX,ESQ,ATH,MEL,BAG;\r\n        found.Caract.RÉF ? REF = found.Caract.RÉF : REF = 0;\r\n        found.Caract.DEX ? DEX = found.Caract.DEX : DEX = 0;\r\n        found.Compt['Esquive/Évasion'] ? ESQ = found.Compt['Esquive/Évasion'] : ESQ = 0;\r\n        found.Compt.Athlétisme ? ATH = found.Compt.Athlétisme : ATH = 0;\r\n        found.Compt.Mêlée ? MEL = found.Compt.Mêlée : MEL = 0;\r\n        found.Compt.Bagarre ? BAG = found.Compt.Bagarre : BAG = 0;\r\n\r\n        let valeur = [];\r\n        valeur.push(Number(REF)+Number(ESQ));\r\n        valeur.push(Number(REF)+Number(MEL));\r\n        valeur.push(Number(REF)+Number(BAG));\r\n        valeur.push(Number(DEX)+Number(ATH));\r\n\r\n        return Math.max(...valeur);\r\n    }\r\n    sortie.atq = function() {\r\n        let valeur = [];\r\n        found.Arme.forEach(function(e){\r\n            let effect = {\r\n                poison: false,\r\n                poisonID: '',\r\n                feu: false,\r\n                feuID: '',\r\n                sang: false,\r\n                sangID: '',\r\n                pré: false,\r\n                préID: 0,\r\n                argent: false,\r\n                argentID: '',\r\n            }\r\n            let effectList = ['poison','feu','sang','pré'];\r\n            effectList.forEach(function(eff){\r\n                try {\r\n                    let searching = e.Effet.find(f => f.Nom === eff)\r\n                    if(searching){\r\n                        effect[eff] = true;\r\n                        effect[eff+'ID'] = searching.valeur;\r\n                    }\r\n                } catch (error) {}\r\n            });\r\n            let atq;\r\n            e.Base ? atq = e.Base : atq = 10;\r\n            valeur.push({\r\n                'nom': e.Nom,\r\n                'atk':  atq,\r\n                'dice': e.DMG,\r\n                'rof': e['Att/tour'],\r\n                'FR': false,\r\n                'FP': false,\r\n                'viser':'Aléatoire',\r\n                'effet': effect\r\n            });         \r\n        });\r\n        return valeur;\r\n    }\r\n    sortie.capa = function(){\r\n        let valeur = {regen: false, fureur: false, embush: false, regenID: ''};\r\n        if(found.Régénération){\r\n            valeur.regen = true;\r\n            valeur.regenID = found.Régénération;\r\n        }\r\n        let searching = found.Capacités.find(f => f === 'Fureur');\r\n        if(searching){valeur.fureur=true;}\r\n        return valeur;\r\n    }\r\n    return sortie;\r\n};","const dice = require('./dice_roller');\r\n//const Attack = require('./attack');\r\n\r\n/**\r\n * Constructs a combatant object.\r\n *\r\n * @constructor\r\n * \r\n * let data = {\r\n *  @param id:'Dwarf',\r\n *  // Unique\r\n *  @param ps:15,\r\n *  // PS: Points de Santé\r\n *  @param pa:15,\r\n *  // PA: Pouvoir d'Arrêt\r\n *  @param initiative:15,\r\n *  // Initiative\r\n *  @param def:15,\r\n *  // Base DEF\r\n *  @param capacité:[{name:'id',effet:'valeur'}],\r\n *  // Liste des capacité\r\n *  @param atk: []\r\n *  // Type ATQ\r\n *    @param atk:15,\r\n *    // Base ATQ\r\n *    @param dice:'3d6+1',\r\n *    // DMG\r\n *    @param rof:1,\r\n *    // Att par tour\r\n *    @param FR: false || true\r\n *    // Frappe Rapide\r\n *    @param FP: false || true\r\n *    // Frappe Puissante\r\n *    @param viser: Aléatoire\r\n *    // Localisation\r\n *  ]\r\n *    @param monstre: true || false \r\n *    @param strat: Aléatoire\r\n *    //  Stratégie de combat\r\n *    @param position:  1\r\n *    // Place sur le champs de bataille\r\n *    @param etou: 10\r\n *    // valeur étourdissement\r\n *    @param stun: {etou: data.etou, etat: false, mod: null}\r\n *    // etou = valeur  etat = true|fals  mod = valeur\r\n * };\r\n *\r\n */\r\nmodule.exports = function(data){\r\n  this.id = data.id;\r\n  this.hp = data.ps;\r\n  this.max_hp = data.ps;\r\n  this.ac = data.pa;\r\n  this.max_ac = data.pa;\r\n  this.initiative = data.initiative;\r\n  this.atk = data.atk; // [{atk:1,dice:'1d1',rof:1,FR:false,FP:false,viser:false}]\r\n  this.def = data.def;\r\n//  this.attacks = [new Attack(dmg, dmg_dice, dmg_bonus)];\r\n  this.rof = 1;\r\n  this.buffs = [];\r\n  this.capacité = data.capacité;\r\n  this.monstre = data.monstre;\r\n  this.strat = data.strat;\r\n  this.position = data.position;\r\n  this.reacted = false;\r\n  this.reactions = [];\r\n  this.stun = {etou: data.etou, etat: false, mod: null};\r\n  this.malus = {sang: false, poison: false, feu: false};\r\n/*  this.addAttack = function(attack){\r\n    this.attacks.push(attack);\r\n  };*/\r\n  this.addBuff = function(buff){\r\n    this.buffs.push(buff);\r\n  };\r\n  this.addReaction = function(reaction){\r\n    this.reactions.push(reaction);\r\n  };\r\n  this.checkBuffs = function(){\r\n    this.buffs = this.buffs.filter(function(buff){\r\n      return !!buff.time;\r\n    });\r\n  };\r\n  this.tickBuffs = function(){\r\n    this.buffs.forEach(function(buff){\r\n      if (buff.time > 0){\r\n         buff.time -= 1;\r\n       }\r\n    });\r\n  };\r\n  this.stats = {\r\n    hp: function(){return this.parent.hp;},\r\n    ac: function(){return sumBuffs(this.parent, 'ac');},\r\n    initiative: function(){return sumBuffs(this.parent, 'initiative');},\r\n    atk: function(){return SumAtk(this.parent);},\r\n    def: function(){return sumBuffs(this.parent, 'def');}\r\n  };\r\n  this.rollInitiative = function(){\r\n    return dice(\"1d10+\"+this.stats.initiative()).expl();\r\n  };\r\n  this.attackChoice = function(){\r\n    let posibilité = this.atk.length;\r\n    let roll = Math.floor(Math.random() * posibilité);\r\n    let sortie = this.atk[roll];\r\n    sortie.id = roll;\r\n    return sortie;\r\n  };\r\n  this.attackRoll = function(e){\r\n    let mod = Number(e.atk);\r\n    let modificateurs = {\"base\": Number(e.atk),\"FP\":false,\"viser\":false};\r\n    if(e.viser === \"Tête\"){\r\n      mod-=6;\r\n      modificateurs.viser=\"-6 (tête)\";\r\n    }\r\n\t\tif(e.viser === \"Torse\"){\r\n      mod-=1;\r\n      modificateurs.viser=\"-1 (torse)\";\r\n    }\r\n\t\tif(e.viser === \"Membre\"){\r\n      mod-=3;\r\n      modificateurs.viser=\"-3 (membre)\";\r\n    }\r\n    if(e.FP){\r\n      mod-=3;\r\n      modificateurs.FP=\"-3 (frappe puissante)\";\r\n    }\r\n    if(e.effet.pré){\r\n      mod+= Number(e.effet.préID);\r\n      modificateurs.pré = Number(e.effet.préID);\r\n    }else{\r\n      modificateurs.pré = false;\r\n    }\r\n    //isNaN(this.stats.atk()) ?  mod += 0 : mod += Number(this.stats.atk());\r\n    let dé = \"1d10\";\r\n    if(mod!==0){\r\n      if(mod>0){dé=\"1d10+\"+mod}else{dé=\"1d10\"+mod};\r\n    }\r\n    let ret = dice(dé).expl();\r\n    ret.modificateurs = modificateurs;\r\n    return ret;\r\n  };\r\n  this.defRoll = function(){\r\n    let mod = Number(this.stats.def());\r\n    let dé = \"1d10\";\r\n    if(mod!==0){\r\n      if(mod>0){dé=\"1d10+\"+mod}else{dé=\"1d10\"+mod};\r\n    }\r\n    return dice(dé).expl();\r\n  };\r\n  this.isHit = function(attackRoll,defRoll){\r\n    let nextReaction = this.reactions.length - 1;\r\n    while(!this.reacted && nextReaction >= 0 && nextReaction < this.reactions.length){\r\n      this.reacted = this.reactions[nextReaction].trigger(this, attackRoll);\r\n      nextReaction++;\r\n    }\r\n    if(attackRoll > defRoll){\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n  this.takeDamage = function(damageRoll){\r\n    this.hp -= damageRoll;\r\n    if (this.hp < 0){\r\n      this.hp = 0;\r\n    }\r\n  };\r\n  this.isDead = function(){\r\n    if (this.hp <= 0) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n  this.isStun = function(mod){\r\n    let roll = dice('1d10');\r\n    let ETOU = Number(this.stun.etou)+Number(mod);\r\n    if(roll.total < ETOU){\r\n      this.stun.etat = false;this.stun.mod = null;\r\n    }else{\r\n      this.stun.etat = true; this.stun.mod = mod;\r\n    }\r\n  }\r\n  this.resetMalus = function(){\r\n    this.malus = {sang: false, poison: false, feu: false};\r\n  }\r\n  this.reset = function(){\r\n    this.hp = this.max_hp;\r\n    this.ac = this.max_ac;\r\n    this.reacted = false;\r\n    this.malus = {sang: false, poison: false, feu: false}\r\n  };\r\n  this.init = function(){\r\n    this.stats.parent = this;\r\n    delete this.init;\r\n  };\r\n  this.init();\r\n};\r\n\r\nfunction SumAtk(self, index){\r\n  let sum = [];\r\n  self.atk.forEach(function(e){\r\n    let total = e.atk;\r\n    self.buffs.forEach(function(buff){\r\n      if (buff.bonus.atk){\r\n        total += buff.bonus.atk;\r\n      }\r\n    });\r\n    sum.push(total);\r\n  });\r\n  return sum;\r\n}\r\n\r\nfunction sumBuffs(self, stat){\r\n  let total = self[stat];\r\n  self.buffs.forEach(function(buff){\r\n    if (buff.bonus[stat]){\r\n      total += buff.bonus[stat];\r\n    }\r\n  });\r\n  return total;\r\n}","module.exports = function(){\r\n    this.members = [];\r\n    this.combatStrategies = {\r\n      lowest_hp: function(combatantA, combatantB){\r\n        return combatantA.hp - combatantB.hp;\r\n      },\r\n      highest_hp: function(combatantA, combatantB){\r\n        return combatantB.hp - combatantA.hp;\r\n      },\r\n      lowest_pa: function(combatantA, combatantB){\r\n        return combatantA.ac - combatantB.ac;\r\n      },\r\n      lowest_position: function(combatantA, combatantB){\r\n        return combatantA.position - combatantB.position;\r\n      },\r\n      highest_position: function(combatantA, combatantB){\r\n        return combatantB.position - combatantA.position;\r\n      },\r\n      highest_dmg: function(combatantA, combatantB){\r\n        let dmgA = 0;\r\n        combatantA.attacks.forEach(function(element) {\r\n          let dmg = element.dice_type * element.dice_number + element.dmg_bonus;\r\n          dmgA += dmg;\r\n        });\r\n  \r\n        let dmgB = 0;\r\n        combatantB.attacks.forEach(function(element) {\r\n          let dmg = element.dice_type * element.dice_number + element.dmg_bonus;\r\n          dmgB += dmg;\r\n        });\r\n  \r\n        return dmgB - dmgA;\r\n      }\r\n    };\r\n//    this.combatStrategy = this.combatStrategies.lowest_hp;\r\n    this.addMember = function(combatant){\r\n      this.members.push(combatant);\r\n    };\r\n    this.selectTarget = function(opponents,strat){\r\n      opponents.sort(this.combatStrategies[strat]);\r\n      let target = opponents[0];\r\n      return target;\r\n    };\r\n  };","const Attack = require('./attack');\r\nconst Capacité = require('./capacité');\r\nconst Malus = require('./malus');\r\n\r\nmodule.exports = function(){\r\n\r\n    this.parties = {};\r\n    this.addParty = function(party, id){\r\n      this.parties[id] = party;\r\n    };\r\n    this.turnList = [];\r\n    this.initiateCombat = function(logger){\r\n      if (typeof logger == 'undefined'){\r\n        logger = function(string){};\r\n      }\r\n      let self = this;\r\n      for(let party in self.parties){\r\n        self.parties[party].members.forEach(function(combatant){\r\n          self.turnList.push({\r\n            party_id: party,\r\n            combatant: combatant,\r\n            roll: combatant.rollInitiative()\r\n          });\r\n        });\r\n      }\r\n      self.turnList.sort(function(a, b) {\r\n        return (a.roll.total < b.roll.total) ?  1 : ((b.roll.total < a.roll.total) ? -1 : 0);\r\n      });\r\n      logger('Ordre des tours:');\r\n      let n = 1;\r\n      self.turnList.forEach(function(member){\r\n        logger(n + '. ' + member.combatant.id);\r\n        n += 1;\r\n      });\r\n    };\r\n    this.runRound = function(logger){\r\n      if (typeof logger == 'undefined'){\r\n        logger = function(string){};\r\n      }\r\n      logger('Prochain tour:');\r\n      let self = this;\r\n      self.turnList.forEach(function(current_combatant){\r\n        let combatant = current_combatant.combatant;\r\n        let party_id = current_combatant.party_id;\r\n        Capacité(combatant,logger);\r\n        combatant.tickBuffs();\r\n        combatant.reacted = false;\r\n        Malus(combatant,logger);\r\n        if (!combatant.isDead()){\r\n          let opponentParties = [];\r\n          for (let p_id in self.parties){\r\n            if (party_id !== p_id){\r\n              opponentParties.push(self.parties[p_id]);\r\n            }\r\n          }\r\n          let opponents = [];\r\n          opponentParties.forEach(function(party){\r\n            party.members.forEach(function(member){\r\n              if (!member.isDead()){\r\n                opponents.push(member);\r\n              }\r\n            });\r\n          });\r\n          if(combatant.stun.etat){\r\n            logger(combatant.id+'est Étourdi.');\r\n            combatant.isStun(combatant.stun.mod);\r\n          }else{\r\n            let atkch = combatant.attackChoice();\r\n            for(let i=0;i<atkch.rof;i++){\r\n              let target = self.parties[party_id].selectTarget(opponents,combatant.strat);\r\n              if (typeof target == 'undefined'){\r\n                return;\r\n              }\r\n              let atk = combatant.attackRoll(atkch);\r\n              let atkRoll = atk.total;\r\n              let def = target.defRoll();\r\n              let defRoll = def.total;\r\n\r\n              let affichageBaseAtq = \"Base attaque:\"+atk.modificateurs.base;\r\n              if(atk.modificateurs.pré){affichageBaseAtq += \", Précision:\"+atk.modificateurs.pré;}\r\n              if(atk.modificateurs.viser){affichageBaseAtq += \", \"+atk.modificateurs.viser;}\r\n              if(atk.modificateurs.FP){affichageBaseAtq += \", \"+atk.modificateurs.FP;}\r\n\r\n              if (target.isHit(atkRoll,defRoll)){\r\n                let damage = new Attack(atkch,atkRoll,defRoll,target);\r\n                target.ac--;\r\n                if(target.ac<0){target.ac=0;}\r\n                target.takeDamage(damage.total);\r\n                if(damage.loc !== \"|Armure > DMG|\"){\r\n                  let DMG_aff = \"\";\r\n                  damage.desc.monstre ? ( \r\n                    DMG_aff = 'Dégats: '+JSON.stringify(damage.desc.dmg)+damage.desc.armor+' '+damage.desc.loc+' /2 [Résistance] +'+damage.desc.crit\r\n                  ) : (\r\n                    DMG_aff = 'Dégats: '+JSON.stringify(damage.desc.dmg)+damage.desc.armor+' '+damage.desc.loc+' +'+damage.desc.crit\r\n                  );\r\n                  logger({\r\n                    \"type\":\"damage\",\r\n                    \"text1\": \"- \"+combatant.id + ' touche ' + target.id + ' et inflige ',\r\n                    \"text2\": \"points de dégâts à \"+ damage.loc + \". \"+ combatant.id + \"possède \"+combatant.hp+\"/\"+combatant.max_hp+\" PS.\",\r\n                    \"damage\": damage.total,\r\n                    \"Atk\": 'Jet '+atkch.nom+': '+JSON.stringify(atk.valeur)+'+'+affichageBaseAtq +' vs Jet défense: '+JSON.stringify(def.valeur)+\"+\"+def.brut,\r\n                    \"DMG\": DMG_aff\r\n                  });\r\n                }else{\r\n                  logger({\r\n                    \"type\":\"armor\",\r\n                    \"text1\": \"- \"+combatant.id + ' touche ' + target.id,\r\n                    \"text2\": \".\",\r\n                    \"damage\": \" mais ne passe pas son armure\",\r\n                    \"Atk\": 'Jet '+atkch.nom+': '+JSON.stringify(atk.valeur)+'+'+affichageBaseAtq +' vs Jet défense: '+JSON.stringify(def.valeur)+\"+\"+def.brut,\r\n                    \"DMG\": \"Dégâts totaux: \"+damage.total+ \"vs \"+ target.ac + \" d'armure.\",\r\n                  });\r\n                }\r\n              } else {\r\n                logger({\r\n                  \"type\":\"échec\",\r\n                  \"text1\": \"- \"+combatant.id,\r\n                  \"text2\": target.id,\r\n                  \"damage\": \" rate \",\r\n                  \"Atk\": 'Jet d\\'attaque: '+JSON.stringify(atk.valeur)+'+'+affichageBaseAtq,\r\n                  \"DMG\": 'Jet défense: '+JSON.stringify(def.valeur)+\"+\"+def.brut,\r\n                });\r\n              }\r\n            };\r\n          }\r\n        }\r\n        combatant.resetMalus();\r\n        combatant.checkBuffs();\r\n      });\r\n    };\r\n    this.runFight = function(logger){\r\n      if (typeof logger == 'undefined'){\r\n        logger = function(string){};\r\n      }\r\n      this.initiateCombat(logger);\r\n      let anticrash = 0;\r\n      while(this.isFightOnGoing()){\r\n        this.runRound(logger);\r\n        anticrash++;\r\n        if(anticrash===50){\r\n          logger('Nombre maximal de tours atteint (50)');\r\n          break;\r\n        }\r\n      }\r\n      this.survivorsStats(logger);\r\n      return this.survivors();\r\n  \r\n    };\r\n    this.isFightOnGoing = function(){\r\n      let alive = {};\r\n      for ( let c in this.turnList ) {\r\n        if (!this.turnList[c].combatant.isDead()){\r\n          alive[this.turnList[c].party_id] = 1;\r\n          if (Object.keys(alive).length > 1){\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    this.survivorsStats = function(logger){\r\n      logger('Liste des Survivants:');\r\n      let dead = [];\r\n      for ( let c in this.turnList ) {\r\n        if (!this.turnList[c].combatant.isDead()){\r\n          let e = this.turnList[c].combatant;\r\n          logger(e.id+\" - PS: \"+e.stats.hp()+\"/\"+e.max_hp+\" ; PA: \"+e.stats.ac()+\"/\"+e.max_ac);\r\n        }else{\r\n          dead.push(this.turnList[c].combatant);\r\n        }\r\n      }\r\n      logger('Morts:');\r\n      dead.forEach(function(e){\r\n        logger(e.id+\" - PS: \"+e.stats.hp()+\"/\"+e.max_hp+\" ; PA: \"+e.stats.ac()+\"/\"+e.max_ac);\r\n      });\r\n    }\r\n    this.survivors = function(){\r\n      let alive = [];\r\n      for ( let c in this.turnList ) {\r\n        if (!this.turnList[c].combatant.isDead()){\r\n          alive.push(this.turnList[c]);\r\n        }\r\n      }\r\n      return alive;\r\n    };\r\n    this.reset = function(){\r\n      this.turnList = [];\r\n      let self = this;\r\n      for (let party in self.parties){\r\n        self.parties[party].members.forEach(function(combatant){\r\n          combatant.reset();\r\n        });\r\n      }\r\n    };\r\n};","const dice = require('./dice_roller');\r\n// Calcul des dégâts!\r\nmodule.exports = function(atk,attackRoll,defRoll,cible){\r\n  let jet = dice(atk.dice);\r\n  let roll = Number(jet.total);\r\n  let desc = {dmg:jet.valeur};\r\n  if(jet.brut){\r\n\tdesc.dmg.push(Number(jet.brut));\r\n  }\r\n  \tif(cible.monstre){\r\n\t\ttry{\r\n\t\t\tif(atk.effet.argent){\r\n\t\t\t\tlet jet2 = dice(atk.effet.argentID);\r\n\t\t\t\troll += Number(jet2.total);\r\n\t\t\t\tdesc.dmg.push(jet2.valeur);\r\n\t\t\t\tif(jet2.brut){\r\n\t\t\t\t\tdesc.dmg.push(Number(jet2.brut));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(err){\r\n\t\t\tconsole.log('Erreur:',err);\r\n\t\t}\r\n\t}\r\n  var loca = \"Aléatoire\";\r\n  \tif(this.FP){roll *= 2;desc.dmg.push('x2');}\r\n\troll -= Number(cible.ac);\r\n\tdesc.armor=(-cible.ac);\r\n\tif(roll<=0){\r\n\t\troll=0;\r\n\t\tloca=\"|Armure > DMG|\";\r\n\t}else{\r\n\t\tlet loc;\r\n\t\tif(atk.viser === \"Aléatoire\"){\r\n\t\t\tloc = dice('1d10').total;\r\n\t\t\tif(loc===1){loc=3;}else if(loc<=4){loc=1;}else{loc=0.5;}\r\n\t\t}else{\r\n\t\t\tif(atk.viser === \"Tête\"){loc=3}\r\n\t\t\tif(atk.viser === \"Torse\"){loc=1}\r\n\t\t\tif(atk.viser === \"Membre\"){loc=0.5}\r\n\t\t}\r\n\t\troll *= loc;desc.loc=('x'+loc);\r\n\t\tif(loc===3){loca=\"Tête\";}else if(loc===1){loca=\"Torse\";}else{loca=\"Membre\";}\r\n\t}\r\n\tif(cible.monstre){\r\n\t\ttry{\r\n\t\t\tif(!atk.effet.argent){\r\n\t\t\t\troll *= 0.5;\r\n\t\t\t\tdesc.monstre = '/2';\r\n\t\t\t}\r\n\t\t}catch(err){\r\n\t\t\tconsole.log('Erreur:',err);\r\n\t\t\troll *= 0.5;\r\n\t\t\tdesc.monstre = '/2';\r\n\t\t}\r\n\t}\r\n\tlet cc = 0;\r\n\tlet diff = Number(attackRoll)-Number(defRoll);\r\n\tif(diff < 7){}else if(diff<10){cc=3;}else if(diff<13){cc=5;}else if(diff<15){cc=8;}else{cc=10;}\r\n\tdesc.crit=cc;\r\n\r\n\tlet effets = ['feu','sang','poison'];\r\n\teffets.forEach(function(el){\r\n\t\tif(atk.effet[el]){\r\n\t\t\tlet r = dice('1d100');\r\n\t\t\tif(r <= atk.effet[el+'ID']){\r\n\t\t\t\tcible.malus[el] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n  return {total:Number(Number(roll)+Number(cc)),loc:loca,desc:desc};\r\n};","const Buff = require('./buff');\r\n\r\nmodule.exports = function(combatant,logger){\r\n\r\n    function Regen(e){\r\n        combatant.hp += Number(e);\r\n        if(combatant.hp > combatant.max_hp){combatant.hp = combatant.max_hp;}            \r\n        logger('Régénération enclenché pour '+combatant.id+' ! ('+combatant.hp+'/'+combatant.max_hp+' PS)');\r\n    }\r\n    //  Format: name    effet\r\n\r\n    if(combatant.capacité.regen){\r\n        Regen(combatant.capacité.regenID);\r\n    }\r\n    if(combatant.capacité.fureur){\r\n        if(combatant.hp<10){\r\n            logger('Fureur enclenché pour '+combatant.id+'!');\r\n            Regen(3);\r\n        }\r\n    }\r\n    if(combatant.capacité.embush){\r\n        combatant.addBuff(new Buff('Embuscade',1,{initiative:2}));\r\n    }\r\n};","module.exports = function(name, time, bonus){\r\n    this.name = name;\r\n    this.time = time;\r\n    this.bonus = bonus;\r\n};","module.exports = function(combatant,logger){\r\n    if(combatant.malus.feu){\r\n        // -5 DMG\r\n        combatant.takeDamage(5);\r\n        logger('Incinération: -5 PS');\r\n    }\r\n    if(combatant.malus.sang){\r\n        // -2 DMG\r\n        combatant.takeDamage(2);\r\n        logger('Saignement: -2 PS');\r\n    }\r\n    if(combatant.malus.poison){\r\n        // -3 DMG\r\n        combatant.takeDamage(3);\r\n        logger('Empoisonné: -3 PS');\r\n    }\r\n};","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    '& > * + *': {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nexport function SimpleAlerts(props) {\r\n  const classes = useStyles();\r\n  let data = props.data;\r\n  if(data){\r\n    return (\r\n        <div className={classes.root}>\r\n          <Alert severity=\"error\"> {data} </Alert>\r\n        </div>\r\n    );\r\n  }else{\r\n    return(<span></span>);\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport {CheckMb} from './form/formcheck.js';\r\nimport {SimpleAlerts} from './form/formalert.js';\r\n\r\nimport Bestiaire from './form/bestiaire.json';\r\nconst Prétired = require('./form/prétiré.js');\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    '& .MuiTextField-root': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  mt:{\r\n    marginTop: '15px',\r\n  },\r\n  fr:{\r\n    textAlign: 'right',\r\n  },\r\n  grid:{\r\n    flexGrow: 1,\r\n  },\r\n  center:{\r\n    textAlign: 'center',\r\n  },\r\n  centerBlock:{\r\n    display: 'block',\r\n    margin: '0 auto',\r\n  },\r\n});\r\n\r\nfunction TryCheck(props){\r\n  let {addMember, state, err, base} = props;\r\n\r\n  let tryTrycheck = function(){\r\n    let a = CheckMb(state,base);\r\n    if(a.sortie){\r\n      // ajout du PJ\r\n      err(null);\r\n      delete state.prétiré;\r\n      delete state.anchorEl;\r\n      delete state.anchorEl2;\r\n      delete state.anchorEl3;\r\n      delete state.err;\r\n      addMember(state)\r\n    }else{\r\n      err(a.error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fab \r\n      color=\"primary\"\r\n      aria-label=\"add\"\r\n      title=\"Ajouter le participant\"\r\n      onClick={tryTrycheck}\r\n      style={{display: 'block',margin: '0 auto',}}\r\n    >\r\n      <AddIcon />\r\n    </Fab>\r\n  )\r\n}\r\n\r\nclass Example extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groupe: '',\r\n      id: '',\r\n      ps: '',\r\n      pa: '',\r\n      initiative: '',\r\n      def: '',\r\n      etou: '',\r\n      atk: [{nom: '',atk:'',dice:'',rof:'',FR:false,FP:false,viser:'Aléatoire',effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: 0,argent: false, argentID: ''}}],\r\n      monstre: false,    // true || false\r\n      capacité: {regen: false, fureur: false, embush: false, regenID: ''},    // list\r\n      strat: 'Aléatoire',\r\n      position: '',\r\n      child_atk: 1,       // nombre d'attaques !\r\n      prétiré: false,\r\n      anchorEl: null,\r\n      anchorEl2: null,\r\n      anchorEl3: null,\r\n      err: null,\r\n    };\r\n    this.handleErr = this.handleErr.bind(this);\r\n  }\r\n\r\n  handleClick = e => (event) => {\r\n    this.setState({[e]:event.currentTarget});\r\n  };\r\n\r\n  handleErr(e) {\r\n    this.setState({ err: e});\r\n  }\r\n\r\n  handleClose = e => () => {\r\n    this.setState({[e]:null});\r\n  };\r\n  \r\n  // handle input change\r\n  handleInputChange = (e, index) => {\r\n    let { name, value } = e.target;\r\n    const list = this.state.atk;\r\n\r\n    let tableEffet = ['poison', 'poisonID', 'feu', 'feuID', 'sang', 'sangID', \"pré\", \"préID\", \"argent\", \"argentID\"];\r\n    if(tableEffet.includes(name)){\r\n      if(!value){\r\n        // checked !\r\n        value = e.target.checked;\r\n      }\r\n      list[index]['effet'][name]=value;\r\n    }else{\r\n      if(!value){\r\n        // checked !\r\n        value = e.target.checked;\r\n      }      \r\n      list[index][name] = value;\r\n    }\r\n    this.setState({atk:list});\r\n  };\r\n  handleChange = (e) => {\r\n    let { name, value } = e.target;\r\n    if(!value){value = e.target.checked}\r\n    this.setState({[name]:value});\r\n  };\r\n\r\n  handleAsynChange = (event, values) => {\r\n    this.setState({groupe: values});\r\n  }\r\n  handleAsynChange2 = (event, values) => {\r\n    this.setState({prétiré: values});\r\n  }\r\n\r\n  // handle click event of the Remove button\r\n  handleRemoveClick = index => {\r\n    const list = this.state.atk;\r\n    list.splice(index, 1);\r\n    this.setState({atk:list});\r\n  };\r\n\r\n  // handle click event of the Add button\r\n  handleAddClick = () => {\r\n    const list = this.state.atk;\r\n    list.push({\r\n      nom:'',\r\n      atk:'',\r\n      dice:'',\r\n      rof:'',\r\n      FR:false,\r\n      FP:false,\r\n      viser:'Aléatoire',\r\n      effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: '',argent: false, argentID:''},\r\n    });\r\n    this.setState({atk:list});\r\n  };\r\n\r\n  checkPrétiré = () => {\r\n    let prétiré = this.state.prétiré;\r\n    if(prétiré){\r\n      var found = Bestiaire.find(e => e.Nom === prétiré);\r\n      if(found){\r\n        let def = Prétired(found).def();\r\n        let atk = Prétired(found).atq();;\r\n        let child;  found.Arme ? child = found.Arme.length : child = 0;\r\n        let capacité =  {regen: false, fureur: false, embush: false, regenID: ''};\r\n        let monster; found.Monstre ? monster = true : monster = false;\r\n        this.setState({\r\n          'id': found.Nom,\r\n          'ps': found.Caract.PS,\r\n          'pa': found.Armure,\r\n          'initiative': found.Caract.RÉF,\r\n          'def': def,\r\n          'etou': found.Caract.ETOU,\r\n          'atk': atk,\r\n          'monstre': monster,\r\n          'capacité': capacité,\r\n          'strat': 'Aléatoire',\r\n          'position': child\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // Checkbox à la main\r\n  checkCheck = input => e => {\r\n    let capacité = this.state.capacité;\r\n    capacité[input] ? capacité[input]=false : capacité[input]=true;\r\n    this.setState({'capacité': capacité});\r\n\r\n  }\r\n  checkChecked = (e) => {\r\n    let {value} = e.target;\r\n    let capacité = this.state.capacité;\r\n    capacité.regenID = value;\r\n    this.setState({'capacité': capacité});\r\n  };\r\n\r\n  render() {\r\n    const { values, addMember } = this.props;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <form className={classes.root} noValidate autoComplete=\"off\">\r\n          <div className={classes.grid}>\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={4}>\r\n                <Autocomplete\r\n                  options={values.group}\r\n                  freeSolo\r\n                  name=\"groupe\" onInputChange={this.handleAsynChange}\r\n                  style={{ width: 300 }}\r\n                  renderInput={(params) => <TextField {...params} name=\"groupe\" label=\"Nom du groupe\" placeholder=\"Cliquez pour choisir un groupe\" variant=\"outlined\" />}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.id} name=\"id\" type=\"text\"\r\n                  label=\"Nom du Combattant\"\r\n                  onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={4} className={classes.mt}>\r\n                <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" variant=\"outlined\" onClick={this.handleClick('anchorEl')}>\r\n                    Pré-tiré\r\n                </Button>\r\n                <Menu\r\n                    id=\"simple-menu\"\r\n                    anchorEl={this.state.anchorEl}\r\n                    keepMounted\r\n                    open={Boolean(this.state.anchorEl)}\r\n                    onClose={this.handleClose('anchorEl')}\r\n                >\r\n                  <MenuItem>\r\n                    <Autocomplete\r\n                      name=\"prétiré\"\r\n                      options={Bestiaire}\r\n                      getOptionLabel={(option) => option.Nom}\r\n                      style={{ width: 300 }}\r\n                      onInputChange={this.handleAsynChange2}\r\n                      renderInput={(params) => <TextField {...params} label=\"Nom du pré-tiré\" variant=\"outlined\" />}\r\n                    />\r\n                  </MenuItem>\r\n                  <MenuItem>\r\n                      <Button variant=\"contained\" color=\"primary\" onClick={this.checkPrétiré}>\r\n                        Ajouter\r\n                      </Button>\r\n                  </MenuItem>\r\n                  </Menu>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3} className={classes.center}>\r\n              <Grid item xs>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.ps} name=\"ps\" type=\"text\" label=\"Points de santé\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.pa} name=\"pa\" type=\"text\" label=\"Pouvoir d'arrêt\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.initiative} name=\"initiative\" type=\"text\" label=\"Initiative\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.def} name=\"def\" type=\"text\" label=\"Base Défense\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={this.state.etou} name=\"etou\" type=\"text\" label=\"Étourdissement\" onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            {this.state.atk.map((x, i) => {\r\n                // {atk:1,dice:1d6+2,rof:1,FR:false,FP:true,viser:false}\r\n                return (\r\n                  <div key={i} >\r\n                    <hr/>\r\n                  <Grid container spacing={3}>\r\n                    <Grid item xs={3}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        value={this.state.atk[i].nom} type=\"text\"\r\n                        label=\"Nom de l'Attaque\" name=\"nom\"\r\n                        onChange={e => this.handleInputChange(e, i)}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        value={this.state.atk[i].atk} type=\"number\" label=\"Base Attaque\" name=\"atk\"\r\n                        onChange={e => this.handleInputChange(e, i)}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        value={this.state.atk[i].dice} type=\"text\" label=\"DÉG\" placeholder=\"1d6+2\" name=\"dice\"\r\n                        onChange={e => this.handleInputChange(e, i)}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        value={this.state.atk[i].rof} type=\"number\" label=\"Att/tour\" name=\"rof\"\r\n                        onChange={e => this.handleInputChange(e, i)}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid container spacing={3}>\r\n                    <Grid item xs>       \r\n                      <FormControlLabel\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.atk[i].FR}\r\n                            type=\"checkbox\"\r\n                            name=\"FR\"\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Frappe Rapide\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                      <FormControlLabel\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.atk[i].FP}\r\n                            type=\"checkbox\"\r\n                            name=\"FP\"\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Frappe Puissante\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                      <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                        <InputLabel id=\"select-Vise-label\">Viser:</InputLabel>\r\n                        <Select\r\n                          labelId=\"select-Vise-label\"\r\n                          value={this.state.atk[i].viser}\r\n                          onChange={e => this.handleInputChange(e, i)}\r\n                          label=\"Viser:\"\r\n                          name=\"viser\"\r\n                        >\r\n                          <MenuItem value={'Aléatoire'}>Aléatoire</MenuItem>\r\n                          <MenuItem value={'Tête'}>Tête</MenuItem>\r\n                          <MenuItem value={'Torse'}>Torse</MenuItem>\r\n                          <MenuItem value={'Membre'}>Membre</MenuItem>\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                    <Grid item xs className={classes.mt}>\r\n                      <Button aria-controls=\"simple-menu-effets\" aria-haspopup=\"true\" variant=\"outlined\" onClick={this.handleClick('anchorEl2')}>\r\n                        Effets\r\n                      </Button>\r\n                      <Menu\r\n                          id=\"simple-menu-effets\"\r\n                          anchorEl={this.state.anchorEl2}\r\n                          keepMounted\r\n                          open={Boolean(this.state.anchorEl2)}\r\n                          onClose={this.handleClose('anchorEl2')}\r\n                      >\r\n                        <MenuItem>\r\n                          <FormControlLabel\r\n                          control={\r\n                            <Checkbox\r\n                            name=\"poison\" checked={this.state.atk[i].effet.poison} onClick={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                            />\r\n                          }\r\n                          label=\"Empoisonné\"\r\n                          />\r\n                          <TextField\r\n                            variant=\"outlined\"\r\n                            type=\"number\" label=\"%\" name=\"poisonID\" value={this.state.atk[i].effet.poisonID} \r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                          />\r\n                        </MenuItem>\r\n                        <MenuItem>\r\n                          <FormControlLabel\r\n                          control={\r\n                            <Checkbox\r\n                            name=\"feu\" checked={this.state.atk[i].effet.feu} onClick={e => this.handleInputChange(e, i)}\r\n                            color=\"primary\"\r\n                            />\r\n                          }\r\n                          label=\"Incinération\"\r\n                          />\r\n                          <TextField\r\n                            variant=\"outlined\"\r\n                            type=\"number\" label=\"%\" name=\"feuID\" value={this.state.atk[i].effet.feuID}\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                          />\r\n                        </MenuItem>\r\n                          <MenuItem>\r\n                            <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                              name=\"sang\" checked={this.state.atk[i].effet.sang} onClick={e => this.handleInputChange(e, i)}\r\n                              color=\"primary\"\r\n                              />\r\n                            }\r\n                            label=\"Saignement\"\r\n                            />\r\n                            <TextField\r\n                            variant=\"outlined\"\r\n                            type=\"number\" label=\"%\" name=\"sangID\" value={this.state.atk[i].effet.sangID}\r\n                            onChange={e => this.handleInputChange(e, i)}\r\n                            />\r\n                          </MenuItem>\r\n                          <MenuItem>\r\n                            <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                              name=\"pré\" checked={this.state.atk[i].effet.pré} onClick={e => this.handleInputChange(e, i)}\r\n                              color=\"primary\"\r\n                              />\r\n                            }\r\n                            label=\"Précision\"\r\n                            />\r\n                            <TextField\r\n                              variant=\"outlined\"\r\n                              value={this.state.atk[i].effet.préID}\r\n                              type=\"number\"\r\n                              label=\"Valeur Précision\"\r\n                              name=\"préID\"\r\n                              onChange={e => this.handleInputChange(e, i)}\r\n                            />\r\n                          </MenuItem>\r\n                          <MenuItem>\r\n                            <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                              name=\"argent\" checked={this.state.atk[i].effet.argent} onClick={e => this.handleInputChange(e, i)}\r\n                              color=\"primary\"\r\n                              />\r\n                            }\r\n                            label=\"Argent\"\r\n                            />\r\n                            <TextField\r\n                              variant=\"outlined\"\r\n                              value={this.state.atk[i].effet.argentID}\r\n                              type=\"text\"\r\n                              label=\"Bonus Argent\"\r\n                              name=\"argentID\"\r\n                              onChange={e => this.handleInputChange(e, i)}\r\n                            />\r\n                          </MenuItem>\r\n                        </Menu>\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid className={classes.fr}>\r\n                    {this.state.child_atk.length !== 1 && <IconButton aria-label=\"delete\" className={classes.margin} onClick={() => this.handleRemoveClick(i)}>\r\n                     <DeleteIcon />\r\n                   </IconButton>}\r\n                  </Grid>\r\n                  </div>\r\n                )}\r\n            )}\r\n            <hr />\r\n            <Grid className={classes.fr}>\r\n                <Fab variant=\"extended\" color=\"primary\" aria-label=\"add\" onClick={this.handleAddClick}>\r\n                  Ajouter une attaque\r\n                </Fab>\r\n            </Grid>\r\n            <br />\r\n            <Grid container spacing={3}>\r\n              <Grid item xs>       \r\n                <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={this.state.monstre}\r\n                        name=\"monstre\"\r\n                        type=\"checkbox\"\r\n                        onChange={e => this.handleChange(e)}\r\n                        color=\"primary\"\r\n                      />\r\n                    }\r\n                    label=\"Monstre\"\r\n                />\r\n              </Grid>\r\n              <Grid item xs>\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    value={this.state.position}\r\n                    name=\"position\"\r\n                    type=\"number\"\r\n                    label=\"Positionnement\"\r\n                    min=\"1\"\r\n                    onChange={e => this.handleChange(e)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs>\r\n                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                  <InputLabel id=\"select-strat-label\">Stratégie:</InputLabel>\r\n                  <Select\r\n                      labelId=\"select-strat-label\"\r\n                      value={this.state.strat}\r\n                      name=\"strat\"\r\n                      label=\"Stratégie:\"\r\n                      onChange={e => this.handleChange(e)}\r\n                  >\r\n                    <MenuItem value={'Aléatoire'}>Aléatoire</MenuItem>\r\n                    <MenuItem value={'Moins de PS'}>Moins de PS</MenuItem>\r\n                    <MenuItem value={'Moins de PA'}>Moins de PA</MenuItem>\r\n                    <MenuItem value={'Première ligne'}>Première ligne</MenuItem>\r\n                    <MenuItem value={'Dernière ligne'}>Dernière ligne</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs className={classes.mt}>\r\n                <Button aria-controls=\"simple-menu-capa\" aria-haspopup=\"true\" variant=\"outlined\" onClick={this.handleClick('anchorEl3')}>\r\n                  Effets\r\n                </Button>\r\n                <Menu\r\n                      id=\"simple-menu-capa\"\r\n                      anchorEl={this.state.anchorEl3}\r\n                      keepMounted\r\n                      open={Boolean(this.state.anchorEl3)}\r\n                      onClose={this.handleClose('anchorEl3')}\r\n                    >\r\n                    <MenuItem>\r\n                      <FormControlLabel\r\n                        onClick={this.checkCheck('regen')}\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.capacité.regen}\r\n                            type=\"checkbox\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Régénération\"\r\n                      />\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        onChange={e => this.checkChecked(e)}\r\n                        type=\"number\"\r\n                        placeholder=\"Valeur\"\r\n                      />\r\n                    </MenuItem>\r\n                    <MenuItem>\r\n                      <FormControlLabel\r\n                        onClick={this.checkCheck('fureur')}\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.capacité.fureur} \r\n                            type=\"checkbox\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Fureur\"\r\n                      />\r\n                    </MenuItem>\r\n                    <MenuItem>\r\n                      <FormControlLabel\r\n                        onClick={this.checkCheck('embush')}\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.state.capacité.embush}\r\n                            type=\"checkbox\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Embuscade\"\r\n                      />\r\n                    </MenuItem>\r\n                  </Menu>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid>\r\n              <TryCheck state={this.state} addMember={addMember()} err={this.handleErr} base={values} />\r\n            </Grid>\r\n          </div>\r\n        </form>\r\n        <SimpleAlerts data={this.state.err} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true})(Example);","/*\r\n    groupe: '',\r\n    id: '',\r\n    ps: '',\r\n    pa: '',\r\n    initiative: '',\r\n    def: '',\r\n    etou: '',\r\n    atk: [{atk:'',dice:'',rof:'',FR:false,FP:false,viser:'Aléatoire',effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: 0}}],\r\n    monstre: '',    // true || false\r\n    capacité: {regen: false, fureur: false, embush: false, regenID: ''},    // list\r\n    strat: 'Aléatoire',\r\n    position: '',\r\n*/      \r\nexport function CheckMb(e,base){\r\n    let sortie = true, err = \"\";\r\n    if(!e.groupe){sortie=false;err += \"Pas de groupe. \";}\r\n    if(!e.id){sortie=false;err += \"Pas de nom. \";}else{\r\n        let found = base.member.find(element => element.id === e.id);\r\n        if(found){sortie=false;err += \"Nom déjà utilisé. \";}\r\n    }\r\n    if(!e.ps){sortie=false;err += \"Pas de PS. \";}\r\n    if(!e.pa){sortie=false;err += \"Pas de PA. \";}\r\n    if(!e.initiative){sortie=false;err += \"Pas d'initiative. \";}\r\n    if(!e.def){sortie=false;err += \"Pas de Base DÉF. \";}\r\n    if(!e.etou){sortie=false;err += \"Pas de Base ÉTOU. \";}\r\n    if(!e.position){sortie=false;err += \"Pas d'ordre de positionnement. \";}\r\n\r\n    e.atk.forEach(i => {\r\n        if(!i.atk){sortie=false;err += \"Pas de Base ATQ. \";}        \r\n        if(!i.dice){sortie=false;err += \"Pas de DÉG. \";}\r\n        if(!i.rof){sortie=false;err += \"Pas d'Att/tour. \";}        \r\n    });\r\n    return {sortie: sortie, error: err}\r\n};","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: 500,\r\n  },\r\n  typography: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function PositionedPopper(props) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [placement, setPlacement] = React.useState();\r\n  const classes = useStyles();\r\n\r\n  const {data} = props;\r\n\r\n  const handleClick = (newPlacement) => (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setOpen((prev) => placement !== newPlacement || !prev);\r\n    setPlacement(newPlacement);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Popper open={open} anchorEl={anchorEl} placement={placement} transition>\r\n        {({ TransitionProps }) => (\r\n          <Fade {...TransitionProps} timeout={350}>\r\n            <Paper>\r\n                <Typography className={classes.typography}>\r\n                    {data.Atk}\r\n                    <br />\r\n                    {data.DMG}\r\n                </Typography>\r\n            </Paper>\r\n          </Fade>\r\n        )}\r\n      </Popper>\r\n      <div>\r\n          {data.text1}\r\n          {\r\n              data.type === \"damage\" ? (\r\n                <Button color=\"primary\" variant=\"outlined\" onClick={handleClick('bottom')}> {data.damage} </Button>\r\n              ) : (\r\n                data.type === \"échec\" ? (\r\n                    <Button color=\"secondary\" variant=\"outlined\" onClick={handleClick('bottom')}> {data.damage} </Button>\r\n                ) : (\r\n                    <Button variant=\"outlined\" onClick={handleClick('bottom')}> {data.damage} </Button>\r\n                )\r\n              )\r\n          }\r\n          {data.text2}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TreeView from '@material-ui/lab/TreeView';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport TreeItem from '@material-ui/lab/TreeItem';\r\nimport SecurityIcon from '@material-ui/icons/Security';\r\n\r\nimport LogPoPer from './input/Logpoper.js';\r\n\r\nfunction Test(props){\r\n  let e = props.data;\r\n  let ee = props.dataSur;\r\n  let groupePJ = props.group[0];\r\n  let clé = Object.keys(e);\r\n\r\n  let ordre = {};\r\n  let detail = {};\r\n  let surv = {};\r\n  let dc = {};\r\n  clé.forEach(function(k){\r\n    let array1 = e[k];\r\n    let indexA = array1.findIndex((element) => element === \"Ordre des tours:\");\r\n    let indexB = array1.findIndex((element) => element === \"Prochain tour:\");\r\n    let indexC = array1.findIndex((element) => element === \"Liste des Survivants:\");\r\n    let indexD = array1.findIndex((element) => element === \"Morts:\");\r\n\r\n    ordre[k] = (array1.slice(indexA+1, indexB));\r\n    detail[k] = (array1.slice(indexB+1, indexC));\r\n    surv[k] = (array1.slice(indexC+1, indexD));\r\n    dc[k] = (array1.slice(indexD+1));\r\n  });\r\n  return clé.map((k,i) =>\r\n    <TreeItem key={'clé-'+i} nodeId={k} label={bouclier(k,ee[k],groupePJ)}>\r\n      <TreeItem nodeId={k+\"-1\"} label=\"Ordre des tours:\">\r\n        <TreeItem nodeId={k+\"-1-1\"} label={test2(ordre[k])} />\r\n      </TreeItem>\r\n      <TreeItem nodeId={k+\"-2\"} label=\"Détails des tours\">\r\n        <TreeItem nodeId={k+\"-2-1\"} label={test2(detail[k])}/>\r\n      </TreeItem>\r\n      <TreeItem nodeId={k+\"-3\"} label=\"Survivants\">\r\n        <TreeItem nodeId={k+\"-3-1\"} label={test2(surv[k])} />\r\n      </TreeItem>\r\n      <TreeItem nodeId={k+\"-4\"} label=\"Morts\">\r\n        <TreeItem nodeId={k+\"-4-1\"} label={test2(dc[k])}/>\r\n      </TreeItem>\r\n    </TreeItem>\r\n  );\r\n}\r\n\r\nfunction test2(e){\r\n  let sortie = [];\r\n    e.forEach(function(i){\r\n      if(i===\"Prochain tour:\"||i===\"Liste des Survivants:\"){\r\n        sortie.push(<div><hr /><b><u>{i}</u></b></div>);\r\n      }else if(i===\"Morts:\"){\r\n        sortie.push(<div><b><u>{i}</u></b></div>);\r\n      }else if(i.type){\r\n        sortie.push(\r\n          <LogPoPer data={i} />\r\n        )\r\n      }\r\n      else{\r\n        sortie.push(<div>{i}</div>);\r\n      }\r\n    });\r\n  return (\r\n    <div>\r\n      {sortie}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction bouclier(k,e,groupe){\r\n  if(e===groupe){\r\n    return (\r\n      <div>\r\n      Combat n°{k} ~ <SecurityIcon color=\"primary\" />\r\n      </div>\r\n    )\r\n  }else{\r\n    return (\r\n      <div>\r\n      Combat n°{k} ~ <SecurityIcon color=\"secondary\" />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: 240,\r\n    flexGrow: 1,\r\n  },\r\n  grid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: '50% 50%',\r\n  },\r\n  block: {\r\n    display: 'block',\r\n  },\r\n});\r\n\r\nexport default function FileSystemNavigator(props) {\r\n  const classes = useStyles();\r\n  const { values } = props;\r\n  if(values.logs){\r\n    return (\r\n      <div className={classes.grid}>\r\n        <TreeView\r\n          className={classes.root}\r\n          defaultCollapseIcon={<ExpandMoreIcon />}\r\n          defaultExpandIcon={<ChevronRightIcon />}\r\n        >\r\n          <Test data={values.logs.log} dataSur={values.logs.survivor} group={values.group} />\r\n        </TreeView>\r\n        <div>\r\n          <h3>\r\n            % de victoire:\r\n          </h3>\r\n          <List component=\"nav\" aria-label=\"secondary mailbox folders\">\r\n            {values.logs.ratio.map((x, i) => {\r\n              return (             \r\n                  <ListItem key={i} button>\r\n                    <ListItemText primary={x} />\r\n                  </ListItem>\r\n              )}\r\n            )}\r\n          </List>\r\n        </div>\r\n      </div> \r\n    );\r\n  }else{\r\n    return (<span></span>);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  typography: {\r\n    margin: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport function FormDialog(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const {data,edit,del,handleInputChange,handleInputChange2,handleInputChange3} = props;\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const item = [{\"n\":'PS',\"v\":\"ps\"},{'n':'PA','v':'pa'},{\"n\":\"Initiative\",\"v\":\"initiative\"},{\"n\":\"Défense\",\"v\":\"def\"},{\"n\":\"Étourdissement\",\"v\":\"etou\"}];\r\n  const listItems = item.map((e) => \r\n    <TextField className={classes.typography} margin=\"dense\" label={e.n} name={e.v} value={data[e.v]} onChange={handleInputChange} />\r\n  );\r\n\r\n  const listAtq = data.atk.map((e,i) => \r\n    <div>\r\n      <TextField className={classes.typography} margin=\"dense\" label=\"Nom\" value={e.nom} name=\"nom\" onChange={e => handleInputChange2(e, i)} />\r\n      <TextField className={classes.typography} margin=\"dense\" label=\"Attaque\" value={e.atk}/>\r\n      <TextField className={classes.typography} margin=\"dense\" label=\"DÉG\" value={e.dice} />\r\n      <TextField className={classes.typography} margin=\"dense\" type=\"number\" label=\"Att/tour\" value={e.rof} />\r\n      <FormControlLabel\r\n        className={classes.typography}\r\n        control={\r\n          <Checkbox\r\n            checked={e.FR}\r\n            type=\"checkbox\"\r\n            name=\"FR\"\r\n            onChange={e => handleInputChange2(e, i)}\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Frappe Rapide\"\r\n      />\r\n      <FormControlLabel\r\n        className={classes.typography}\r\n        control={\r\n          <Checkbox\r\n            checked={e.FP}\r\n            type=\"checkbox\"\r\n            name=\"FP\"\r\n            onChange={e => handleInputChange2(e, i)}\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Frappe Puissante\"\r\n      />\r\n       <FormControl\r\n        className={classes.typography}>\r\n        <InputLabel id=\"select-Vise-label\">Viser:</InputLabel>\r\n          <Select\r\n            labelId=\"select-Vise-label\"\r\n            value={e.viser}\r\n            onChange={e => handleInputChange2(e, i)}\r\n            label=\"Viser:\"\r\n            name=\"viser\"\r\n          >\r\n          <MenuItem value={'Aléatoire'}>Aléatoire</MenuItem>\r\n          <MenuItem value={'Tête'}>Tête</MenuItem>\r\n          <MenuItem value={'Torse'}>Torse</MenuItem>\r\n          <MenuItem value={'Membre'}>Membre</MenuItem>\r\n        </Select>\r\n      </FormControl>              \r\n      <div>\r\n        <div>\r\n          <FormControlLabel\r\n            className={classes.typography}\r\n            control={\r\n              <Checkbox\r\n                checked={e.effet.poison}\r\n                type=\"checkbox\"\r\n                name=\"poison\"\r\n                onChange={e => handleInputChange2(e, i)}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Empoisonné\"\r\n          />\r\n          <TextField\r\n            type=\"number\" label=\"%\" name=\"poisonID\" value={e.effet.poisonID} \r\n            onChange={e => handleInputChange2(e, i)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <FormControlLabel\r\n            className={classes.typography}\r\n            control={\r\n              <Checkbox\r\n                checked={e.effet.feu}\r\n                type=\"checkbox\"\r\n                name=\"feu\"\r\n                onChange={e => handleInputChange2(e, i)}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Incinération\"\r\n          />\r\n          <TextField\r\n            type=\"number\" label=\"%\" name=\"feuID\" value={e.effet.feuID} \r\n            onChange={e => handleInputChange2(e, i)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <FormControlLabel\r\n            className={classes.typography}\r\n            control={\r\n              <Checkbox\r\n                checked={e.effet.sang}\r\n                type=\"checkbox\"\r\n                name=\"sang\"\r\n                onChange={e => handleInputChange2(e, i)}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Saignement\"\r\n          />\r\n          <TextField\r\n            type=\"number\" label=\"%\" name=\"sangID\" value={e.effet.sangID} \r\n            onChange={e => handleInputChange2(e, i)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <FormControlLabel\r\n            className={classes.typography}\r\n            control={\r\n              <Checkbox\r\n                checked={e.effet.pré}\r\n                type=\"checkbox\"\r\n                name=\"pré\"\r\n                onChange={e => handleInputChange2(e, i)}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Précision\"\r\n          />\r\n          <TextField\r\n            type=\"text\" label=\"Valeur PRÉ\" name=\"préID\" value={e.effet.préID} \r\n            onChange={e => handleInputChange2(e, i)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <FormControlLabel\r\n            className={classes.typography}\r\n            control={\r\n              <Checkbox\r\n                checked={e.effet.argent}\r\n                type=\"checkbox\"\r\n                name=\"argent\"\r\n                onChange={e => handleInputChange2(e, i)}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Argent\"\r\n          />\r\n          <TextField\r\n            type=\"number\" label=\"Bonus DÉG Argent\" name=\"argentID\" value={e.effet.argentID} \r\n            onChange={e => handleInputChange2(e, i)}\r\n          />\r\n        </div>       \r\n      </div>\r\n      <hr />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n        <div style={{display: 'block', margin: '0 auto', textAlign: 'center'}}>\r\n            <IconButton aria-label=\"edit\" onClick={handleClickOpen} title=\"Éditer le combatant\">\r\n                <EditIcon />\r\n            </IconButton>\r\n            <IconButton aria-label=\"delete\" title=\"Supprimer le combatant\" >\r\n                <DeleteIcon onClick={e => del(data,e)}/>\r\n            </IconButton>\r\n        </div>\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Edition du Combatant</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Vous pouvez modifier les statistiques de {data.id} [{data.groupe}]. \r\n          </DialogContentText>\r\n          {listItems}\r\n          <hr />\r\n          {listAtq}\r\n          <hr />\r\n          <FormControlLabel\r\n            className={classes.typography}\r\n            control={\r\n              <Checkbox\r\n                checked={data.monstre}\r\n                type=\"checkbox\"\r\n                name=\"monstre\"\r\n                onChange={handleInputChange}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Monstre\"\r\n          />\r\n          <TextField className={classes.typography} margin=\"dense\" label=\"Position\" name=\"position\" value={data.position} onChange={handleInputChange} />\r\n          <FormControl className={classes.formControl}>\r\n            <InputLabel id=\"select-strat-label\">Stratégie:</InputLabel>\r\n            <Select\r\n              labelId=\"select-strat-label\"\r\n              value={data.strat}\r\n              name=\"strat\"\r\n              label=\"Stratégie:\"\r\n              onChange={handleInputChange}\r\n            >\r\n              <MenuItem value={'Aléatoire'}>Aléatoire</MenuItem>\r\n              <MenuItem value={'Moins de PS'}>Moins de PS</MenuItem>\r\n              <MenuItem value={'Moins de PA'}>Moins de PA</MenuItem>\r\n              <MenuItem value={'Première ligne'}>Première ligne</MenuItem>\r\n              <MenuItem value={'Dernière ligne'}>Dernière ligne</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <div>\r\n            <FormControlLabel\r\n              className={classes.typography}\r\n              control={\r\n                <Checkbox\r\n                  checked={data.capacité.regen}\r\n                  type=\"checkbox\"\r\n                  name=\"regen\"\r\n                  onChange={handleInputChange3}\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Régénération\"\r\n            />\r\n            <TextField className={classes.typography} margin=\"dense\" label=\"Valeur (Régénération)\" name=\"regenID\" value={data.capacité.regenID} onChange={handleInputChange3} />\r\n            <FormControlLabel\r\n              className={classes.typography}\r\n              control={\r\n                <Checkbox\r\n                  checked={data.capacité.fureur}\r\n                  type=\"checkbox\"\r\n                  name=\"fureur\"\r\n                  onChange={handleInputChange3}\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Fureur\"\r\n            />\r\n            <FormControlLabel\r\n              className={classes.typography}\r\n              control={\r\n                <Checkbox\r\n                  checked={data.capacité.embush}\r\n                  type=\"checkbox\"\r\n                  name=\"embush\"\r\n                  onChange={handleInputChange3}\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Embuscade\"\r\n            />\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions onClick={handleClose}>\r\n          <Button color=\"primary\">\r\n            Fermer\r\n          </Button>\r\n          <Button color=\"primary\" onClick={function(){edit(data)}}>\r\n            Valider\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport {FormDialog} from './partipopedit.js';\r\n\r\nclass FormDialogModal extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = props.data;\r\n      this.handleInputChange = this.handleInputChange.bind(this);\r\n      this.handleInputChange2 = this.handleInputChange2.bind(this);\r\n      this.handleInputChange3 = this.handleInputChange3.bind(this);\r\n    }\r\n  \r\n    handleInputChange(event) {\r\n      const target = event.target;\r\n      const value = target.type === 'checkbox' ? target.checked : target.value;\r\n      const name = target.name;\r\n  \r\n      this.setState({\r\n        [name]: value\r\n      });\r\n    }\r\n\r\n    handleInputChange2 = (e, index) => {\r\n      let { name, value } = e.target;\r\n      const list = this.state.atk;\r\n    \r\n      let tableEffet = ['poison', 'poisonID', 'feu', 'feuID', 'sang', 'sangID', \"pré\", \"préID\", \"argent\", \"argentID\"];\r\n        if(tableEffet.includes(name)){\r\n          if(!value){\r\n            // checked !\r\n            value = e.target.checked;\r\n          }\r\n          list[index]['effet'][name]=value;\r\n        }else{\r\n          if(!value){\r\n            // checked !\r\n            value = e.target.checked;\r\n          }      \r\n          list[index][name] = value;\r\n        }\r\n      this.setState({atk:list});\r\n    };\r\n\r\n    handleInputChange3(event) {\r\n      const target = event.target;\r\n      const value = target.type === 'checkbox' ? target.checked : target.value;\r\n      const name = target.name;\r\n      const list = this.state.atk;\r\n      list[name] = value;\r\n      this.setState({capacité: list});\r\n    }\r\n  \r\n    render() {\r\n        // data={data} edit={edit} del={del}\r\n        const { edit, del } = this.props;\r\n      return (\r\n        <form>\r\n            <FormDialog data={this.state} edit={edit} del={del} handleInputChange={this.handleInputChange} handleInputChange2={this.handleInputChange2} handleInputChange3={this.handleInputChange3} />\r\n       </form>\r\n      );\r\n    }\r\n}\r\n\r\nexport default FormDialogModal;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormDialogModal from './edition/form.js';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    border: '1px solid',\r\n    padding: theme.spacing(1),\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  typography: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction Atq(props){\r\n  let d = props.data;\r\n  if(d.length > 0){\r\n    // atk: [{atk:'',dice:'',rof:'',FR:false,FP:false,viser:'Aléatoire',\r\n    // effet:{poison: false,poisonID: '',feu: false,feuID: '',sang: false,sangID: '',pré: false,préID: 0}}],\r\n    let a = [<b>Attaque:</b>];\r\n    d.forEach(e => {\r\n      a.push(\"- Base ATQ: \"+e.atk);\r\n      a.push(\"- DÉG: \"+e.dice);\r\n      a.push(\"- Att/tour: \"+e.rof);\r\n      if(e.FR){a.push(\"- Frappe Rapide\");}\r\n      if(e.FP){a.push(\"- Frappe Puissance\");}\r\n      a.push(\"- Viser: \"+e.viser);\r\n      if(e.effet.poison || e.effet.feu ||e.effet.sang || e.effet.pré){\r\n        a.push(\"Effet:\");\r\n        if(e.effet.pré){a.push(\"- PRÉ: \"+e.effet.préID)}\r\n        if(e.effet.poison){a.push(\"- Poison: \"+e.effet.poisonID)}\r\n        if(e.effet.feu){a.push(\"- Enflammer: \"+e.effet.feuID)}\r\n        if(e.effet.sang){a.push(\"- Saignement: \"+e.effet.sangID)}\r\n      }\r\n      a.push(<hr />);\r\n    });\r\n    return a.map((x,i) => \r\n      <div key={i}>\r\n        {x}\r\n      </div>\r\n    )\r\n  }else{\r\n    return (<div>Pas d'Attaque...</div>)\r\n  }\r\n}\r\n\r\nfunction Capa(props){\r\n  let d = props.data;\r\n  //  capacité: {regen: false, fureur: false, embush: false, regenID: ''}\r\n  if(d.regen || d.fureur || d.embush){\r\n    let a = [<b>Capacité: </b>];\r\n    if(d.regen){\r\n      a.push('Regénération ('+d.regenID+')');\r\n    }\r\n    if(d.fureur){a.push(\"Fureur\");}\r\n    if(d.embush){a.push(\"Embuscade\");}\r\n    return a.map((x,i) => \r\n      <span key={i}>\r\n        {x}\r\n      </span>\r\n    )\r\n  }else{\r\n    return (<span></span>);\r\n  }\r\n}\r\n\r\nexport function SimplePopper(props) {\r\n  var {label,color,data, del,edit} = props;\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(anchorEl ? null : event.currentTarget);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popper' : undefined;\r\n\r\n  return (\r\n    <div>\r\n      <Chip label={label} color={color} aria-describedby={id} onClick={handleClick} />\r\n      <Popper id={id} open={open} anchorEl={anchorEl}>\r\n        <Paper>\r\n            <Typography className={classes.typography} component=\"div\">\r\n                Groupe: {data.groupe}\r\n                <br/>\r\n                PS: {data.ps}\r\n                <br/>\r\n                PA: {data.pa}\r\n                <br/>\r\n                Initiative: {data.initiative}\r\n                <br/>\r\n                Base DÉF: {data.def}\r\n                <br/>\r\n                Étourdissement: {data.etou}\r\n                <br/>\r\n                <Atq data={data.atk} />\r\n                {data.monstre ? \"Monstre\" : \"\"}\r\n                <br/>\r\n                Positionnement: {data.position}\r\n                <br/>\r\n                <Capa data={data.capacité} />\r\n                <FormDialogModal data={data} edit={edit} del={del} />\r\n            </Typography>\r\n        </Paper>\r\n      </Popper>\r\n    </div>\r\n  );\r\n}","const Combatant = require('../../module/combatant');\r\nconst Party = require('../../module/party');\r\nconst Combat = require('../../module/combat');\r\n\r\nexport function Sim(group,members){\r\n  let c = new Combat();\r\n  group.forEach(function(e){\r\n    let p = new Party();\r\n    c.addParty(p, e);\r\n  });\r\n  members.forEach(function(e){\r\n\t\tlet new_combatant = new Combatant(e);\r\n    console.log(new_combatant);\r\n    c.parties[e.groupe].addMember(new_combatant);\r\n  });\r\n\r\n  let loggerdeloggi = {};\r\n  let loggeridex = 1;\r\n\r\n  let logginette = function(string){\r\n    loggerdeloggi[loggeridex].push(string)\r\n  };\r\n\r\n  let winners = [];\r\n  for(let index=0; index < 100; index++){\r\n    loggerdeloggi[loggeridex] = [];\r\n    winners.push(c.runFight(logginette));\r\n    c.reset();\r\n    loggeridex++;\r\n  }\r\n\r\n  let parties = {};\r\n  for (let party_id in c.parties){\r\n    parties[party_id] = 0;\r\n  }\r\n\r\n  let survivor = ['Survivants:'];\r\n\r\n  winners.forEach(function(winner_party){\r\n    survivor.push(winner_party[0].party_id);\r\n    parties[winner_party[0].party_id] += 1;\r\n  });\r\n\r\n  let winRatio = [];\r\n  for (let p in parties){\r\n    winRatio.push(p + ': ' + parties[p] + '%');\r\n  }\r\n  \r\n  return {\r\n    log:loggerdeloggi,\r\n    survivor: survivor,\r\n    ratio: winRatio\r\n  }\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport {Publish} from '@material-ui/icons';\r\n\r\nexport function FormDialog(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [code, setCode] = React.useState(false);\r\n  const { change } = props;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const importData = () => {\r\n    if(code){\r\n        let data = JSON.parse(code);\r\n        if(data.member && data.group){\r\n            change('member',data.member);\r\n            change('group',data.group);\r\n        }else{\r\n            console.log('Erreur:',data);\r\n        }\r\n    }else{\r\n        console.log('Erreur:',code);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-label=\"Importer\"\r\n        title=\"Importer\" \r\n        onClick={handleClickOpen}\r\n      >\r\n          <Publish />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Importation</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Veillez importer le code ci-dessous.\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"Code\"\r\n            type=\"textarea\"\r\n            fullWidth\r\n            onChange={e => setCode(e.target.value)}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions onClick={handleClose}>\r\n          <Button  color=\"primary\">\r\n            Annuler\r\n          </Button>\r\n          <Button color=\"primary\" onClick={importData}>\r\n            Importer\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { GetApp, RotateLeft } from '@material-ui/icons';\r\n\r\nimport {URLexportation} from './participant/urlexpt.js';\r\nimport {SimplePopper} from './participant/partipop.js';\r\nimport {Sim} from './participant/sim.js';\r\nimport {FormDialog} from './participant/modal.js';\r\n\r\nfunction PartiList(props){\r\n  let {data, del, edit} = props;\r\n  let aff = [];\r\n  let iColor = 0;\r\n  data.group.forEach(e => {\r\n    let color;\r\n    iColor === 0 ? color = \"primary\" : color = \"secondary\";\r\n    data.member.forEach(f => {\r\n      if(f.groupe === e){\r\n        aff.push(\r\n          <SimplePopper label={f.id} color={color} data={f} edit={edit} del={del}/>\r\n        );\r\n      }\r\n    });\r\n\r\n    iColor === 0 ? iColor++ : iColor=0;\r\n  });\r\n  return aff.map((x,i) =>\r\n  <div key={i} style={{columnCount:2}}>\r\n    {x}\r\n  </div>);\r\n}\r\n\r\nexport default function RecipeReviewCard(props) {\r\n  const { values, log, edit, del, change } = props;\r\n\r\n  const simulation = function() {\r\n    let sim = Sim(values.group,values.member);\r\n    log(sim);\r\n  }\r\n\r\n  const reiniData = () => {\r\n    change('member',[]);\r\n    change('group',['Les PJ']);\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader\r\n        title=\"Liste des participants\"\r\n      />\r\n      <CardContent>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\r\n          <PartiList data={values} edit={edit} del={del} />\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions disableSpacing>\r\n        <IconButton aria-label=\"Télécharger\" title=\"Sauvegarder\" onClick={() => {URLexportation(values.group, values.member)}}>\r\n          <GetApp />\r\n        </IconButton>\r\n        <FormDialog change={change} />\r\n        <Button onClick={simulation}>Simuler</Button>\r\n        <IconButton aria-label=\"Réinitialiser\" title=\"Réinitialiser\">\r\n          <RotateLeft change={change} onClick={reiniData} />\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}","export function URLexportation(group, member){\r\n    let expt = {};\r\n    expt.group = group;\r\n    expt.member = member;\r\n\r\n    navigator.clipboard.writeText(JSON.stringify(expt));\r\n    return (console.log('Groupe Copié!'));\r\n};","import React, { Component } from 'react';\r\nimport Formulaire from './form';\r\nimport Render from './log';\r\nimport Participant from './participant';\r\n\r\nexport class UserForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.addLog = this.addLog.bind(this);\r\n    this.editMb = this.editMb.bind(this);\r\n    this.delMb = this.delMb.bind(this);\r\n  }\r\n  state = {\r\n    member: [],\r\n    group: ['Les PJ','Les Monstres'],\r\n    logs: null,\r\n  };\r\n\r\n  // Handle fields change\r\n  handleChange = (input,val) => {\r\n    this.setState({ [input]: val });\r\n  };\r\n\r\n  addMember = input => e => {\r\n    let member = this.state.member;\r\n    member.push(e);\r\n    this.setState({member:member});\r\n\r\n    let GroupList = this.state.group;\r\n    if(!GroupList.includes(e.groupe)){\r\n      GroupList.push(e.groupe);\r\n      this.setState({group:GroupList});\r\n    }\r\n  }\r\n  \r\n  addLog(e) {\r\n    this.setState({logs:e});\r\n  }\r\n  editMb(e) {\r\n    let member = this.state.member;\r\n    let index = member.findIndex((element) => element.id === e.id);\r\n    if(index>=0){\r\n      member.splice(index, 1, e);\r\n      this.setState({member:member});\r\n    }\r\n  }\r\n  delMb(e) {\r\n    console.log(e);\r\n    let member = this.state.member;\r\n    let index = member.findIndex((element) => element.id === e.id);\r\n    member.splice(index, 1);\r\n    this.setState({member:member});\r\n  }\r\n\r\n\r\n  reinitialisation() {\r\n    this.setState({\r\n        member: [],\r\n        group: []\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { member, group, logs } = this.state;\r\n    const values = { member, group, logs };\r\n\r\n    return (\r\n        <div className=\"App\">\r\n          <div className=\"m-25\">\r\n            <Formulaire addMember={this.addMember} values={values} />\r\n          </div>\r\n          <div className=\"m-25\">\r\n            <hr />\r\n          </div>\r\n          <div className=\"m-25\">\r\n            <Participant values={values} log={this.addLog} edit={this.editMb} del={this.delMb} change={this.handleChange} />\r\n          </div>\r\n          <div className=\"m-25\">\r\n            <hr />\r\n          </div>\r\n          <div className=\"m-10\">\r\n            <Render values={values} />\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserForm;","import './App.css';\nimport Render from './sim/render';\n\nfunction App() {\n  return (\n    <Render />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","function Rand(max) {\r\n  return Math.floor(Math.random() * max)+1;\r\n}\r\nconst reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n\r\nmodule.exports = function(e){\r\n  let dice = {};\r\n  dice.expression = e;\r\n  dice.valeur = [];\r\n  let formule = dice.expression.split('d');\r\n  let brut = formule[1].split('+');\r\n  if(!brut[1]){brut=formule[1].split('-');brut[1]= -brut[1];}\r\n  for(let i=0;i<formule[0];i++){\r\n      dice.valeur.push(Rand(brut[0]));\r\n  }\r\n  if(brut[1]){dice.brut=brut[1];}\r\n  dice.expl = function(){ // dé explosif sur 1 & max sur le 1er jet uniquement = format Witcher\r\n    if(dice.valeur[0]===1||dice.valeur[0]===brut[0]){\r\n      let roll = Rand(brut[0]);\r\n      dice.valeur.push(roll);\r\n      while(roll===1||roll===brut[0]){\r\n        roll=Rand(brut[0]);\r\n        dice.valeur.push(roll);\r\n      }\r\n    }\r\n    if(dice.valeur[0]===1){dice.Echec=true;}else if(dice.valeur[0]===brut[0]){dice.critique=true;}\r\n    dice.total = dice.valeur.reduce(reducer);\r\n    if(dice.Echec){dice.total = Number(-(dice.total));}\r\n    if(dice.brut){dice.total+=Number(dice.brut);}\r\n    return dice;\r\n  }\r\n  dice.total = dice.valeur.reduce(reducer);\r\n  if(dice.brut){dice.total+=Number(dice.brut);}\r\n  return dice;\r\n}"],"sourceRoot":""}